import yfinance as yf 
import pandas as pd
import time
from indicators import (
    calculate_additional_indicators,
    advanced_strategy_score,
    send_telegram,
    detect_candle_pattern,
    SCORE_THRESHOLD
)

# ------------------------------------------------------------------
# List of stocks (can later be dynamic from NSE CSV)
# ------------------------------------------------------------------
def fetch_nifty_100():
    try:
        return [
           #  "VMM.NS", "NTPCGREEN.NS", "MCX.NS", "CREDITACC.NS", "RELIANCE.NS","TCS.NS"
            # "AADHARHFC.NS",	"AARTIIND.NS",	"ACE.NS",	"ABREL.NS",	"AEGISLOG.NS",	"AFCONS.NS",	"AFFLE.NS",	"ARE&M.NS",	"AMBER.NS",	"ANANTRAJ.NS",	"ANGELONE.NS",	"ASTERDM.NS",	"ATUL.NS",	"BEML.NS",	"BLS.NS",	"BATAINDIA.NS",	"BSOFT.NS",	"FIRSTCRY.NS",	"BRIGADE.NS",	"CESC.NS",	"CASTROLIND.NS",	"CDSL.NS",	"CHAMBLFERT.NS",	"CAMS.NS",	"CREDITACC.NS",	"CROMPTON.NS",	"CYIENT.NS",	"DATAPATTNS.NS",	"DELHIVERY.NS",	"DEVYANI.NS",	"LALPATHLAB.NS",	"FSL.NS",	"FIVESTAR.NS",	"GRSE.NS",	"GODIGIT.NS",	"GODFRYPHLP.NS",	"GESHIP.NS",	"GSPL.NS",	"HBLENGINE.NS",	"HFCL.NS",	"HSCL.NS",	"HINDCOPPER.NS",	"IDBI.NS",	"IFCI.NS",	"IIFL.NS",	"IRCON.NS",	"ITI.NS",	"INDIAMART.NS",	"IEX.NS",	"INOXWIND.NS",	"IGIL.NS",	"IKS.NS",	"JBMA.NS",	"JWL.NS",	"KPIL.NS",	"KARURVYSYA.NS",	"KAYNES.NS",	"KEC.NS",	"KFINTECH.NS",	"LAURUSLABS.NS",	"MGL.NS",	"MANAPPURAM.NS",	"MCX.NS",	"NATCOPHARM.NS",	"NBCC.NS",	"NCC.NS",	"NH.NS",	"NAVINFLUOR.NS",	"NEULANDLAB.NS",	"NEWGEN.NS",	"NUVAMA.NS",	"PCBL.NS",	"PGEL.NS",	"PNBHOUSING.NS",	"PVRINOX.NS",	"PEL.NS",	"PPLPHARMA.NS",	"POONAWALLA.NS",	"RITES.NS",	"RADICO.NS",	"RAILTEL.NS",	"RKFORGE.NS",	"REDINGTON.NS",	"RPOWER.NS",	"SAGILITY.NS",	"SHYAMMETL.NS",	"SIGNATURE.NS",	"SONATSOFTW.NS",	"SWANENERGY.NS",	"TATACHEM.NS",	"TTML.NS",	"TEJASNET.NS",	"RAMCOCEM.NS",	"TITAGARH.NS",	"TRIDENT.NS",	"TRITURBINE.NS",	"WELCORP.NS",	"WELSPUNLIV.NS",	"ZENTEC.NS",	"ZENSARTECH.NS",	"ACC.NS",	"APLAPOLLO.NS",	"AUBANK.NS",	"ATGL.NS",	"ABCAPITAL.NS",	"ABFRL.NS",	"ALKEM.NS",	"APOLLOTYRE.NS",	"ASHOKLEY.NS",	"ASTRAL.NS",	"AUROPHARMA.NS",	"BSE.NS",	"BANDHANBNK.NS",	"BANKINDIA.NS",	"MAHABANK.NS",	"BDL.NS",	"BHARATFORG.NS",	"BHEL.NS",	"BHARTIHEXA.NS",	"BIOCON.NS",	"COCHINSHIP.NS",	"COFORGE.NS",	"COLPAL.NS",	"CONCOR.NS",	"CUMMINSIND.NS",	"DIXON.NS",	"ESCORTS.NS",	"EXIDEIND.NS",	"NYKAA.NS",	"FEDERALBNK.NS",	"GMRAIRPORT.NS",	"GLENMARK.NS",	"GODREJPROP.NS",	"HDFCAMC.NS",	"HINDPETRO.NS",	"HINDZINC.NS",	"HUDCO.NS",	"IDFCFIRSTB.NS",	"IRB.NS",	"INDIANB.NS",	"IRCTC.NS",	"IREDA.NS",	"IGL.NS",	"INDUSTOWER.NS",	"JUBLFOOD.NS",	"KPITTECH.NS",	"KALYANKJIL.NS",	"LTF.NS",	"LICHSGFIN.NS",	"LUPIN.NS",	"MRF.NS",	"M&MFIN.NS",	"MANKIND.NS",	"MARICO.NS",	"MFSL.NS",	"MAXHEALTH.NS",	"MAZDOCK.NS",	"MOTILALOFS.NS",	"MPHASIS.NS",	"MUTHOOTFIN.NS",	"NHPC.NS",	"NMDC.NS",	"NTPCGREEN.NS",	"NATIONALUM.NS",	"OBEROIRLTY.NS",	"OIL.NS",	"OLAELEC.NS",	"PAYTM.NS",	"OFSS.NS",	"POLICYBZR.NS",	"PIIND.NS",	"PAGEIND.NS",	"PATANJALI.NS",	"PERSISTENT.NS",	"PETRONET.NS",	"PHOENIXLTD.NS",	"POLYCAB.NS",	"PREMIERENE.NS",	"PRESTIGE.NS",	"RVNL.NS",	"SBICARD.NS",	"SJVN.NS",	"SRF.NS",	"SOLARINDS.NS",	"SONACOMS.NS",	"SAIL.NS",	"SUPREMEIND.NS",	"SUZLON.NS",	"TATACOMM.NS",	"TATAELXSI.NS",	"TATATECH.NS",	"TORNTPOWER.NS",	"TIINDIA.NS",	"UPL.NS",	"UNIONBANK.NS",	"VMM.NS",	"IDEA.NS",	"VOLTAS.NS",	"WAAREEENER.NS",	"YESBANK.NS",	"ABB.NS",	"ADANIENSOL.NS",	"ADANIENT.NS",	"ADANIGREEN.NS",	"ADANIPORTS.NS",	"ADANIPOWER.NS",	"AMBUJACEM.NS",	"APOLLOHOSP.NS",	"ASIANPAINT.NS",	"DMART.NS",	"AXISBANK.NS",	"BAJAJ-AUTO.NS",	"BAJFINANCE.NS",	"BAJAJFINSV.NS",	"BAJAJHLDNG.NS",	"BAJAJHFL.NS",	"BANKBARODA.NS",	"BEL.NS",	"BPCL.NS",	"BHARTIARTL.NS",	"BOSCHLTD.NS",	"BRITANNIA.NS",	"CGPOWER.NS",	"CANBK.NS",	"CHOLAFIN.NS",	"CIPLA.NS",	"COALINDIA.NS",	"DLF.NS",	"DABUR.NS",	"DIVISLAB.NS",	"DRREDDY.NS",	"EICHERMOT.NS",	"ETERNAL.NS",	"GAIL.NS",	"GODREJCP.NS",	"GRASIM.NS",	"HCLTECH.NS",	"HDFCBANK.NS",	"HDFCLIFE.NS",	"HAVELLS.NS",	"HEROMOTOCO.NS",	"HINDALCO.NS",	"HAL.NS",	"HINDUNILVR.NS",	"HYUNDAI.NS",	"ICICIBANK.NS",	"ICICIGI.NS",	"ICICIPRULI.NS",	"ITC.NS",	"INDHOTEL.NS",	"IOC.NS",	"IRFC.NS",	"INDUSINDBK.NS",	"NAUKRI.NS",	"INFY.NS",	"INDIGO.NS",	"JSWENERGY.NS",	"JSWSTEEL.NS",	"JINDALSTEL.NS",	"JIOFIN.NS",	"KOTAKBANK.NS",	"LTIM.NS",	"LT.NS",	"LICI.NS",	"LODHA.NS",	"M&M.NS",	"MARUTI.NS",	"NTPC.NS",	"NESTLEIND.NS",	"ONGC.NS",	"PIDILITIND.NS",	"PFC.NS",	"POWERGRID.NS",	"PNB.NS",	"RECLTD.NS",	"RELIANCE.NS",	"SBILIFE.NS",	"MOTHERSON.NS",	"SHREECEM.NS",	"SHRIRAMFIN.NS",	"SIEMENS.NS",	"SBIN.NS",	"SUNPHARMA.NS",	"SWIGGY.NS",	"TVSMOTOR.NS",	"TCS.NS",	"TATACONSUM.NS",	"TATAMOTORS.NS",	"TATAPOWER.NS",	"TATASTEEL.NS",	"TECHM.NS",	"TITAN.NS",	"TORNTPHARM.NS",	"TRENT.NS",	"ULTRACEMCO.NS",	"UNITDSPR.NS",	"VBL.NS",	"VEDL.NS",	"WIPRO.NS",	"ZYDUSLIFE.NS"
        # ]
        
    "GLENMARK.NS", "BHARTIARTL.NS", "TCS.NS", "EIEL.NS", "HINDUNILVR.NS",
    "INFY.NS", "BSE.NS", "CRIZAC.NS", "MAMATA.NS", "HDFCBANK.NS",
    "JPPOWER.NS", "RELIANCE.NS", "ICICIBANK.NS", "M&M.NS", "TATAELXSI.NS",
    "INDIGO.NS", "NETWEB.NS", "MANKIND.NS", "IREDA.NS", "PFC.NS",
    "BEL.NS", "KOTAKBANK.NS", "NTPC.NS", "MCX.NS", "TATAMOTORS.NS",
    "WOCKPHARMA.NS", "PAYTM.NS", "CDSL.NS", "KIRLOSENG.NS", "HAL.NS",
    "AXISBANK.NS", "LT.NS", "TRENT.NS", "SBIN.NS", "AMBER.NS",
    "JIOFIN.NS", "WAAREEENER.NS", "MAZDOCK.NS", "DIXON.NS", "BAJAJ-AUTO.NS",
    "ETERNAL.NS", "RECLTD.NS", "SWIGGY.NS", "NTPCGREEN.NS", "HCLTECH.NS",
    "APOLLOHOSP.NS", "ZEEL.NS", "TECHM.NS", "BAJFINANCE.NS", "BDL.NS",
    "COFORGE.NS", "RBLBANK.NS", "VEDL.NS", "ELECON.NS", "ANANDRATHI.NS",
    "BELRISE.NS", "LIQUIDBEES.NS", "VBL.NS", "QPOWER.NS", "ITC.NS",
    "RELIGARE.NS", "WIPRO.NS", "TATASTEEL.NS", "INDUSINDBK.NS", "ENRIN.NS",
    "SHRIRAMFIN.NS", "ACMESOLAR.NS", "DMART.NS", "SAGILITY.NS", "NAUKRI.NS",
    "RTNPOWER.NS", "BOSCHLTD.NS", "ULTRACEMCO.NS", "PEL.NS", "HINDALCO.NS",
    "EICHERMOT.NS", "TITAN.NS", "MAXHEALTH.NS", "LUPIN.NS", "CUMMINSIND.NS",
    "CAMS.NS", "TATAPOWER.NS", "SOLARINDS.NS", "HDFCLIFE.NS", "POWERINDIA.NS",
    "ASIANPAINT.NS", "HAVELLS.NS", "GRSE.NS", "PNB.NS", "HDBFS.NS",
    "OSWALPUMPS.NS", "GAIL.NS", "DATAMATICS.NS", "NMDC.NS", "IDEA.NS",
    "ADANIPOWER.NS", "MARUTI.NS", "COCHINSHIP.NS", "DABUR.NS", "VMM.NS",
    "HEROMOTOCO.NS", "BEML.NS", "SILVERBEES.NS", "BAJAJFINSV.NS", "POLICYBZR.NS",
    "SUNPHARMA.NS", "PCJEWELLER.NS", "SAMBHV.NS", "SAMMAANCAP.NS", "SUZLON.NS",
    "JSWENERGY.NS", "POWERGRID.NS", "POLYCAB.NS", "FORCEMOT.NS", "ANGELONE.NS",
    "INDUSTOWER.NS", "CGPOWER.NS", "LTIM.NS", "SYRMA.NS", "IOC.NS",
    "COLPAL.NS", "PREMIERENE.NS", "ADANIGREEN.NS", "ENGINERSIN.NS", "GODREJPROP.NS",
    "CHOLAFIN.NS", "COALINDIA.NS", "RAMCOCEM.NS", "ANANTRAJ.NS", "CARTRADE.NS",
    "VIPIND.NS", "KAYNES.NS", "BPCL.NS", "DLF.NS", "ABB.NS",
    "LODHA.NS", "OFSS.NS", "JINDALSTEL.NS", "FORTIS.NS", "JSWINFRA.NS",
    "DIVISLAB.NS", "TVSMOTOR.NS", "PROSTARM.NS", "NYKAA.NS", "NIFTYBEES.NS",
    "TATACOMM.NS", "CANBK.NS", "PRESTIGE.NS", "MFSL.NS", "PERSISTENT.NS",
    "BANKBARODA.NS", "KALYANKJIL.NS", "AUBANK.NS", "MPHASIS.NS", "SBILIFE.NS",
    "MOTILALOFS.NS", "HINDZINC.NS", "UPL.NS", "KPITTECH.NS", "NATIONALUM.NS",
    "ASAHIINDIA.NS", "SONACOMS.NS", "CIPLA.NS", "ITCHOTELS.NS", "ONGC.NS",
    "ASHOKLEY.NS", "UNIONBANK.NS", "GRASIM.NS", "NATCOPHARM.NS", "CUPID.NS",
    "DELHIVERY.NS", "SAIL.NS", "TATATECH.NS", "GODREJCP.NS", "NHPC.NS",
    "HYUNDAI.NS", "DIACABS.NS", "IDFCFIRSTB.NS", "LLOYDSENGG.NS", "BLUESTARCO.NS",
    "RVNL.NS", "HDFCAMC.NS", "LEMONTREE.NS", "ICICIGI.NS", "AUROPHARMA.NS",
    "VOLTAS.NS", "ADANIPORTS.NS", "GVT&D.NS", "LAURUSLABS.NS", "INDIANB.NS",
    "SIEMENS.NS", "BIOCON.NS", "HINDPETRO.NS", "TORNTPHARM.NS", "TIINDIA.NS",
    "OLAELEC.NS", "AMBUJACEM.NS", "TRANSRAILL.NS", "SWSOLAR.NS", "DRREDDY.NS",
    "JKCEMENT.NS", "GLAND.NS", "BHARATFORG.NS", "OIL.NS", "INDHOTEL.NS",
    "CREDITACC.NS", "LIQUIDCASE.NS", "UNITDSPR.NS", "TATACONSUM.NS", "SARDAEN.NS",
    "KAJARIACER.NS", "MRF.NS", "COROMANDEL.NS", "HUBTOWN.NS", "MUTHOOTFIN.NS",
    "BRITANNIA.NS", "MOTHERSON.NS", "ADANIENT.NS", "WENDT.NS", "HUDCO.NS",
    "JSWSTEEL.NS", "CYIENT.NS", "RADICO.NS", "BORORENEW.NS", "ZENTEC.NS",
    "ACC.NS", "IRFC.NS", "PCBL.NS", "NH.NS", "GOLDBEES.NS",
    "MARICO.NS", "TRITURBINE.NS", "ASTRAL.NS", "NEULANDLAB.NS", "APTUS.NS",
    "VSTIND.NS", "ZYDUSLIFE.NS", "NESTLEIND.NS", "TFCILTD.NS", "ALKEM.NS",
    "BHEL.NS", "LIQUIDIETF.NS", "ADANIENSOL.NS", "IIFL.NS", "LICHSGFIN.NS",
    "CHAMBLFERT.NS", "EIDPARRY.NS", "YESBANK.NS", "SMLISUZU.NS", "TITAGARH.NS",
    "FEDERALBNK.NS", "LTF.NS", "SBFC.NS", "SHREECEM.NS", "AFFLE.NS",
    "PIIND.NS", "NAM-INDIA.NS", "DBREALTY.NS", "PETRONET.NS", "GABRIEL.NS",
    "BANKINDIA.NS", "PGEL.NS", "SRF.NS", "LIQUIDADD.NS", "HINDCOPPER.NS",
    "JMFINANCIL.NS", "RTNINDIA.NS", "CHENNPETRO.NS", "IEX.NS", "KFINTECH.NS",
    "SAILIFE.NS", "PATANJALI.NS", "AADHARHFC.NS", "JBCHEPHARM.NS", "DATAPATTNS.NS",
    "CRISIL.NS", "APOLLO.NS", "NBCC.NS", "APLAPOLLO.NS", "SWANENERGY.NS",
    "AKUMS.NS", "LALPATHLAB.NS", "SYNGENE.NS", "SPMLINFRA.NS", "BALKRISIND.NS",
    "RKFORGE.NS", "NAVINFLUOR.NS", "IDBI.NS", "CGCL.NS", "UNOMINDA.NS",
    "GPTHEALTH.NS", "KPRMILL.NS", "GMRAIRPORT.NS", "BANDHANBNK.NS", "ARE&M.NS",
    "AJANTPHARM.NS", "ASTERDM.NS", "GILLETTE.NS", "BRIGADE.NS", "UTIAMC.NS",
    "KPIL.NS", "ABSLAMC.NS", "RAILTEL.NS", "PTC.NS", "BLS.NS",
    "DIFFNKG.NS", "APARINDS.NS", "MAHABANK.NS", "ELLEN.NS", "JUBLFOOD.NS",
    "RALLIS.NS", "HFCL.NS", "CROMPTON.NS", "LTTS.NS", "LICI.NS",
    "ECOSMOBLTY.NS", "PARAS.NS", "360ONE.NS", "BBL.NS", "SJVN.NS",
    "SENORES.NS", "AIIL.NS", "HPL.NS", "GODFRYPHLP.NS", "KARURVYSYA.NS",
    "MEDANTA.NS", "NUVAMA.NS", "HBLENGINE.NS", "RAYMONDLSL.NS", "KPIGREEN.NS",
    "NECLIFE.NS", "PIDILITIND.NS", "ACUTAAS.NS", "HSCL.NS", "APOLLOTYRE.NS",
    "REDINGTON.NS", "KIRLOSBROS.NS", "CEIGALL.NS", "ITBEES.NS", "PHOENIXLTD.NS",
    "SBICARD.NS", "ABCAPITAL.NS", "PNBHOUSING.NS", "M&MFIN.NS", "INOXWIND.NS",
    "TATACHEM.NS", "KEI.NS", "PROTEAN.NS", "KIMS.NS", "PPLPHARMA.NS",
    "GLOBUSSPR.NS", "GARUDA.NS", "CONCOR.NS", "HOMEFIRST.NS", "AARTIIND.NS",
    "AAVAS.NS", "POCL.NS", "NCC.NS", "SILVERIETF.NS", "EXIDEIND.NS",
    "ICICIPRULI.NS", "AWL.NS", "BHARTIHEXA.NS", "HEXT.NS", "ELECTCAST.NS",
    "ECLERX.NS", "WELCORP.NS", "MOBIKWIK.NS", "PAGEIND.NS", "IRCON.NS",
    "ZENSARTECH.NS", "SUPREMEIND.NS", "IRB.NS", "KRN.NS", "KEC.NS",
    "MAPMYINDIA.NS", "J&KBANK.NS", "OBEROIRLTY.NS", "SIGNATURE.NS", "FLUOROCHEM.NS",
    "ASTRAMICRO.NS", "SIGNPOST.NS", "INDIAMART.NS", "CESC.NS", "TORNTPOWER.NS",
    "MGL.NS", "IGL.NS", "LLOYDSME.NS", "METROPOLIS.NS", "EDELWEISS.NS",
    "IRCTC.NS", "JUSTDIAL.NS", "JINDWORLD.NS", "NORTHARC.NS", "KSB.NS",
    "MANAPPURAM.NS", "BSOFT.NS", "PARADEEP.NS", "AEGISVOPAK.NS", "SOLARA.NS",
    "MSUMI.NS", "RAYMOND.NS", "SOBHA.NS", "SCODATUBES.NS", "GMDCLTD.NS",
    "STAR.NS", "ORIENTCEM.NS", "EMCURE.NS", "ABLBL.NS", "ABFRL.NS",
    "POONAWALLA.NS", "EMBDL.NS", "EMAMILTD.NS", "ATHERENERG.NS", "JTLIND.NS",
    "AFCONS.NS", "BAJAJHFL.NS", "DODLA.NS", "INFRAIETF.NS", "FIRSTCRY.NS",
    "RAMASTEEL.NS", "DCMSHRIRAM.NS", "LTFOODS.NS", "JYOTISTRUC.NS", "MBAPL.NS",
    "SAMHI.NS", "BLUEJET.NS", "CHOLAHLDNG.NS", "ALOKINDS.NS", "MEDIASSIST.NS",
    "NAZARA.NS", "SUNDARMFIN.NS", "UBL.NS", "JKLAKSHMI.NS", "LIQUIDETF.NS",
    "CERA.NS", "COHANCE.NS", "HGINFRA.NS", "AVANTIFEED.NS", "FSL.NS",
    "MARKSANS.NS", "BANKBEES.NS", "WHIRLPOOL.NS", "KALPATARU.NS", "GENESYS.NS",
    "ARKADE.NS", "SONATSOFTW.NS", "BALRAMCHIN.NS", "HEG.NS", "AEROFLEX.NS",
    "THERMAX.NS", "PTCIL.NS", "SAKSOFT.NS", "JSL.NS", "CCL.NS",
    "STLTECH.NS", "UJJIVANSFB.NS", "GRAVITA.NS", "TECHNOE.NS", "JINDALSAW.NS",
    "BAJAJHLDNG.NS", "INFIBEAM.NS", "INTELLECT.NS", "MINDACORP.NS", "TARIL.NS",
    "OLECTRA.NS", "JGCHEM.NS", "ASKAUTOLTD.NS", "ROTO.NS", "CASTROLIND.NS",
    "CEATLTD.NS", "SCI.NS", "SHAKTIPUMP.NS", "MODEFENCE.NS", "LLOYDSENT.NS",
    "CUB.NS", "GESHIP.NS", "POWERMECH.NS", "VOLTAMP.NS", "TIIL.NS",
    "ATGL.NS", "PAISALO.NS", "BALAMINES.NS", "JUNIORBEES.NS", "TEJASNET.NS",
    "AARTIPHARM.NS", "AEGISLOG.NS", "GPPL.NS", "BAYERCROP.NS", "SALASAR.NS",
    "DEEPAKNTR.NS", "NIVABUPA.NS", "PVRINOX.NS", "GSPL.NS", "THOMASCOOK.NS",
    "63MOONS.NS", "ITDCEM.NS", "IFCI.NS", "SHARDACROP.NS", "GTLINFRA.NS",
    "SUMICHEM.NS", "SUNDRMFAST.NS", "JUBLINGREA.NS", "DEEPAKFERT.NS", "UNIVASTU.NS",
    "BAJAJCON.NS", "ALKYLAMINE.NS", "CENTRALBK.NS", "MRPL.NS", "IKS.NS",
    "SIRCA.NS", "RAINBOW.NS", "MARATHON.NS", "SEPC.NS", "THELEELA.NS",
    "GRAPHITE.NS", "PFIZER.NS", "DCBBANK.NS", "ASHAPURMIN.NS", "ONESOURCE.NS",
    "ABREL.NS", "RELAXO.NS", "GOLDIETF.NS", "GPIL.NS", "SOUTHBANK.NS",
    "CONCORDBIO.NS", "NETWORK18.NS", "TDPOWERSYS.NS", "RATEGAIN.NS", "NEWGEN.NS",
    "TARC.NS", "KRBL.NS", "GREENPOWER.NS", "AKZOINDIA.NS", "WELSPUNLIV.NS",
    "EPACK.NS", "VMART.NS", "JAGSNPHARM.NS", "STARHEALTH.NS", "VINCOFE.NS",
    "NLCINDIA.NS", "FIVESTAR.NS", "QUICKHEAL.NS", "BAJAJHIND.NS", "SPARC.NS",
    "YATHARTH.NS", "JYOTHYLAB.NS", "TIMKEN.NS", "KSCL.NS", "DENTA.NS",
    "SDBL.NS", "LIQUID1.NS", "PRIVISCL.NS", "ASTRAZEN.NS", "CAMPUS.NS",
    "ATUL.NS", "SJS.NS", "INDIASHLTR.NS", "PARAGMILK.NS", "TEXRAIL.NS",
    "UCOBANK.NS", "KPEL.NS", "GICRE.NS", "ERIS.NS", "DLINKINDIA.NS",
    "PRAJIND.NS", "JYOTICNC.NS", "IOB.NS", "SKFINDIA.NS", "HAPPSTMNDS.NS",
    "VENUSPIPES.NS", "DYCL.NS", "TIPSMUSIC.NS", "HDFCSILVER.NS", "TRIDENT.NS",
    "ELGIEQUIP.NS", "EQUITASBNK.NS", "LIQUID.NS", "IPCALAB.NS", "ABDL.NS",
    "TANLA.NS", "GEPIL.NS", "ASALCBR.NS", "JUBLPHARMA.NS", "BANSALWIRE.NS",
    "SHANKARA.NS", "WABAG.NS", "TIMETECHNO.NS", "CAPACITE.NS", "JISLJALEQS.NS",
    "HDFCSML250.NS", "CEWATER.NS", "TI.NS", "VRLLOG.NS", "DOMS.NS",
    "GENUSPOWER.NS", "FINEORG.NS", "SBC.NS", "DIGITIDE.NS", "CHOICEIN.NS",
    "BERGEPAINT.NS", "MASTEK.NS", "IDEAFORGE.NS", "JWL.NS", "BECTORFOOD.NS",
    "GRANULES.NS", "IMFA.NS", "EVEREADY.NS", "NESCO.NS", "AGIIL.NS",
    "SETFGOLD.NS", "RAMKY.NS", "SILVERADD.NS", "DHANI.NS", "CENTEXT.NS",
    "FAZE3Q.NS", "MCLOUD.NS", "SETFNIF50.NS", "KNRCON.NS", "CIGNITITEC.NS",
    "KMEW.NS", "WAAREERTL.NS", "STYRENIX.NS", "JKPAPER.NS", "MIDHANI.NS",
    "KITEX.NS", "JAIBALAJI.NS", "SENCO.NS", "GLAXO.NS", "GREAVESCOT.NS",
    "ZOTA.NS", "SUNTV.NS", "GODREJAGRO.NS", "HITECH.NS", "MANORAMA.NS",
    "AVANTEL.NS", "DHANUKA.NS", "JTEKTINDIA.NS", "INDGN.NS", "ASHOKA.NS",
    "ENDURANCE.NS", "SUPRIYA.NS", "PARSVNATH.NS", "SIGACHI.NS", "HONAUT.NS",
    "IGIL.NS", "WEBELSOLAR.NS", "ROHLTD.NS", "HDFCGOLD.NS", "DEVYANI.NS",
    "TRIVENI.NS", "MANINDS.NS", "PGHL.NS", "PHARMABEES.NS", "ZAGGLE.NS",
    "AXISILVER.NS", "DALBHARAT.NS", "PFOCUS.NS", "DCM.NS", "PREMEXPLN.NS",
    "FLAIR.NS", "MAHSCOOTER.NS", "DCXINDIA.NS", "KTKBANK.NS", "BANCOINDIA.NS",
    "ENTERO.NS", "CSBBANK.NS", "AVALON.NS", "BHARATWIRE.NS", "PRINCEPIPE.NS",
    "EMSLIMITED.NS", "EIMCOELECO.NS", "KIRLPNU.NS", "MOREPENLAB.NS", "AZAD.NS",
    "GODREJIND.NS", "KIRIINDUS.NS", "MOIL.NS", "GALLANTT.NS", "PENINLAND.NS",
    "ESCORTS.NS", "MAHSEAMLES.NS", "AURIONPRO.NS", "DALMIASUG.NS", "HARIOMPIPE.NS",
    "MID150BEES.NS", "CARERATING.NS", "ALANKIT.NS", "NILASPACES.NS", "SCHAEFFLER.NS",
    "JKIL.NS", "TEGA.NS", "JBMA.NS", "GOKEX.NS", "GSFC.NS",
    "LINDEINDIA.NS", "REFEX.NS", "JINDRILL.NS", "BIKAJI.NS", "TBOTEK.NS",
    "NUVOCO.NS", "TVSHLTD.NS", "IOLCP.NS", "STEELXIND.NS", "EIHOTEL.NS",
    "PANACEABIO.NS", "HERITGFOOD.NS", "NIFTY1.NS", "GMRP&UI.NS", "PAKKA.NS",
    "GOKULAGRO.NS", "TATAINVEST.NS", "GOODLUCK.NS", "FMCGIETF.NS", "SWARAJENG.NS",
    "VIJAYA.NS", "JKTYRE.NS", "RITES.NS", "LIQUIDBETF.NS", "MAHLOG.NS",
    "BFUTILITIE.NS", "PNGJL.NS", "MOTISONS.NS", "RENUKA.NS", "BATAINDIA.NS",
    "NAVA.NS", "GNFC.NS", "SUBROS.NS", "ABBOTINDIA.NS", "PENIND.NS",
    "CMSINFO.NS", "VASWANI.NS", "SUNFLAG.NS", "BOMDYEING.NS", "SANSERA.NS",
    "DELTACORP.NS", "CHALET.NS", "ACI.NS", "HONASA.NS", "ARISINFRA.NS",
    "MUTHOOTMF.NS", "WELENT.NS", "FACT.NS", "ZFCVINDIA.NS", "HONDAPOWER.NS",
    "MTNL.NS", "RCF.NS", "INDOBORAX.NS", "DAMCAPITAL.NS", "INDIAGLYCO.NS",
    "MTARTECH.NS", "BIRLACORPN.NS", "MOLDTKPAC.NS", "MON100.NS", "VENTIVE.NS",
    "EMUDHRA.NS", "NFL.NS", "EMIL.NS", "KRSNAA.NS", "SHRIPISTON.NS",
    "VTL.NS", "RPPINFRA.NS", "HEIDELBERG.NS", "USHAMART.NS", "AUTOIETF.NS",
    "NILAINFRA.NS", "AXISGOLD.NS", "ZYDUSWELL.NS", "POLYMED.NS", "STYLAMIND.NS",
    "MEDPLUS.NS", "BASF.NS", "FINOPB.NS", "3MINDIA.NS", "GRWRHITECH.NS",
    "MUFIN.NS", "MANINFRA.NS", "SAPPHIRE.NS", "SHAILY.NS", "GIPCL.NS",
    "SKYGOLD.NS", "FISCHER.NS", "POLYPLEX.NS", "ACE.NS", "CASHIETF.NS",
    "RAJESHEXPO.NS", "TAJGVK.NS", "LUMAXTECH.NS", "BANKNIFTY1.NS", "PGHH.NS",
    "CANFINHOME.NS", "JASH.NS", "KELLTONTEC.NS", "VSTTILLERS.NS", "ALIVUS.NS",
    "KALAMANDIR.NS", "SINDHUTRAD.NS", "QUADFUTURE.NS", "TOP10ADD.NS", "VERANDA.NS",
    "WEL.NS", "PATELENG.NS", "KOLTEPATIL.NS", "FINCABLES.NS", "NIFTYIETF.NS",
    "RAIN.NS", "RAJOOENG.NS", "AIAENG.NS", "PDSL.NS", "SHYAMMETL.NS",
    "BLACKBUCK.NS", "PARACABLES.NS", "FINPIPE.NS", "KOPRAN.NS", "ORIENTTECH.NS",
    "TARMAT.NS", "GRINDWELL.NS", "SALONA.NS", "OPTIEMUS.NS", "DCW.NS",
    "INGERRAND.NS", "CIEINDIA.NS", "GODIGIT.NS", "GRMOVER.NS", "MPSLTD.NS",
    "SSWL.NS", "INDRAMEDCO.NS", "NSIL.NS", "HIRECT.NS", "SFL.NS",
    "PARKHOTELS.NS", "TATAGOLD.NS", "LATENTVIEW.NS", "AARTIDRUGS.NS", "MAFANG.NS",
    "IXIGO.NS", "HIMATSEIDE.NS", "CARBORUNIV.NS", "PSUBNKBEES.NS", "MOL.NS",
    "RHIM.NS", "AWFIS.NS", "SRHHYPOLTD.NS", "RIIL.NS", "AGI.NS",
    "ANUP.NS", "IIFLCAPS.NS", "CAPLIPOINT.NS", "SKIPPER.NS", "WCIL.NS",
    "EPL.NS", "SUNDARMHLD.NS", "SANDUMA.NS", "PURVA.NS", "PNCINFRA.NS",
    "ROSSARI.NS", "NELCO.NS", "GATEWAY.NS", "IMAGICAA.NS", "LUMAXIND.NS",
    "NIBE.NS", "UGROCAP.NS", "SHARDAMOTR.NS", "BLUSPRING.NS", "JAMNAAUTO.NS",
    "LTGILTBEES.NS", "PRAKASH.NS", "RATNAMANI.NS", "NIFTYETF.NS", "SOMATEX.NS",
    "SERVOTECH.NS", "MANYAVAR.NS", "QUESS.NS", "NSLNISP.NS", "ADVENZYMES.NS",
    "CANTABIL.NS", "SHK.NS", "SAREGAMA.NS", "TCI.NS", "SILVERETF.NS",
    "MONARCH.NS", "BBTC.NS", "PNBGILTS.NS", "MAXESTATES.NS", "COSMOFIRST.NS",
    "UDS.NS", "ARVIND.NS", "SEQUENT.NS", "CRAFTSMAN.NS", "MGEL.NS",
    "PRSMJOHNSN.NS", "AJAXENGG.NS", "ARVINDFASN.NS", "GULFOILLUB.NS", "GANECOS.NS",
    "MSTCLTD.NS", "EASEMYTRIP.NS", "VAIBHAVGBL.NS", "CYIENTDLM.NS", "V2RETAIL.NS",
    "RRKABEL.NS", "TIRUMALCHM.NS", "THYROCARE.NS", "NOCIL.NS", "VPRPL.NS",
    "EUREKAFORB.NS", "VARROC.NS", "LOWVOLIETF.NS", "ZEEMEDIA.NS", "GOLD1.NS",
    "VGUARD.NS", "ALPHA.NS", "APLLTD.NS", "CPSEETF.NS", "BLISSGVS.NS",
    "FIEMIND.NS", "AVL.NS", "ETHOSLTD.NS", "INDIACEM.NS", "INDOCO.NS",
    "CLEAN.NS", "FILATEX.NS", "PRICOLLTD.NS", "HIKAL.NS", "GUJGASLTD.NS",
    "RITCO.NS", "SANOFICONR.NS", "GEOJITFSL.NS", "KDDL.NS", "SANATHAN.NS",
    "INNOVANA.NS", "LIQUIDPLUS.NS", "SUPRAJIT.NS", "NIITMTS.NS", "GAEL.NS",
    "HCG.NS", "VIPCLOTHNG.NS", "RAMCOIND.NS", "TATSILV.NS", "SILVER.NS",
    "GMMPFAUDLR.NS", "SALZERELEC.NS", "MOSCHIP.NS", "AETHER.NS", "FEDFINA.NS",
    "RUSTOMJEE.NS", "LGHL.NS", "REDTAPE.NS", "ITI.NS", "BAJAJINDEF.NS",
    "AMRUTANJAN.NS", "ROUTE.NS", "PSB.NS", "BORANA.NS", "SULA.NS",
    "LAOPALA.NS", "NIACL.NS", "NDRAUTO.NS", "ANURAS.NS", "LMW.NS",
    "TRACXN.NS", "GOLDIAM.NS", "SURAJEST.NS", "KSL.NS", "CONTROLPR.NS",
    "HATHWAY.NS", "ICIL.NS", "VIRINCHI.NS", "TATVA.NS", "POKARNA.NS",
    "SUDARSCHEM.NS", "RISHABH.NS", "MMTC.NS", "THEJO.NS", "LXCHEM.NS",
    "UTKARSHBNK.NS", "JCHAC.NS", "E2E.NS", "SUNTECK.NS", "SARVESHWAR.NS",
    "SIYSIL.NS", "SHRIRAMPPS.NS", "TVSSCS.NS", "PGIL.NS", "GROWWDEFNC.NS",
    "GROWWSLVR.NS", "GICHSGFIN.NS", "KRISHANA.NS", "MIDCAPETF.NS", "FCL.NS",
    "AEROENTER.NS", "SILVER1.NS", "MHRIL.NS", "BIL.NS", "RPGLIFE.NS",
    "SPIC.NS", "MANGCHEFER.NS", "WSTCSTPAPR.NS", "SANOFI.NS", "HLEGLAS.NS",
    "ALLCARGO.NS", "JUNIPER.NS", "BALAXI.NS", "PROZONER.NS", "FUSION.NS",
    "TNPETRO.NS", "BLUEDART.NS", "ELECTHERM.NS", "DBL.NS", "MAHLIFE.NS",
    "AGARWALEYE.NS", "HINDOILEXP.NS", "THANGAMAYL.NS", "NRBBEARING.NS", "NDL.NS",
    "GHCL.NS", "GALAPREC.NS", "SURYAROSNI.NS", "IONEXCHANG.NS", "GOCOLORS.NS",
    "SYMPHONY.NS", "INOXINDIA.NS", "AONELIQUID.NS", "HUHTAMAKI.NS", "GANESHHOUC.NS",
    "HEMIPROP.NS", "INNOVACAP.NS", "SBISILVER.NS", "KIRLOSIND.NS", "DEEPINDS.NS",
    "ORCHPHARMA.NS", "IFGLEXPOR.NS", "NOVAAGRI.NS", "GULPOLY.NS", "ALEMBICLTD.NS",
    "EXICOM.NS", "JSFB.NS", "SHAREINDIA.NS", "EPIGRAL.NS", "MICEL.NS",
    "BARBEQUE.NS", "DDEVPLSTIK.NS", "GOCLCORP.NS", "ASAL.NS", "MOCAPITAL.NS",
    "INDNIPPON.NS", "SPANDANA.NS", "METROBRAND.NS", "NEXT50IETF.NS", "SRD.NS",
    "AUTOBEES.NS", "VADILALIND.NS", "TASTYBITE.NS", "RBA.NS", "NCLIND.NS",
    "ARVSMART.NS", "ESILVER.NS", "LGBBROSLTD.NS", "MASPTOP50.NS", "SMALLCAP.NS",
    "MSPL.NS", "RESPONIND.NS", "VASCONEQ.NS", "ALICON.NS", "INDIGOPNTS.NS",
    "ITETF.NS", "FDC.NS", "MAZDA.NS", "MUNJALSHOW.NS", "FILATFASH.NS",
    "PIXTRANS.NS", "CELLO.NS", "INDOSTAR.NS", "VINATIORGA.NS", "HNDFDS.NS",
    "KICL.NS", "PVTBANIETF.NS", "BAJAJHCARE.NS", "UNIVCABLES.NS", "GREENPANEL.NS",
    "NITINSPIN.NS", "PFS.NS", "PILANIINVS.NS", "MOM30IETF.NS", "KKCL.NS",
    "ABSLBANETF.NS", "ARIHANTSUP.NS", "SBCL.NS", "VIMTALABS.NS", "ARMANFIN.NS",
    "SANGHVIMOV.NS", "EXCELINDUS.NS", "MAITHANALL.NS", "MOMENTUM50.NS", "RICOAUTO.NS",
    "AWHCL.NS", "PRUDENT.NS", "NIITLTD.NS", "SHOPERSTOP.NS", "BIRLAMONEY.NS",
    "SANSTAR.NS", "EKC.NS", "ORICONENT.NS", "COMSYN.NS", "PICCADIL.NS",
    "RPSGVENT.NS", "CARYSIL.NS", "SMCGLOBAL.NS", "DHANBANK.NS", "BHARATRAS.NS",
    "NITCO.NS", "WINDMACHIN.NS", "TTKPRESTIG.NS", "SPORTKING.NS", "NEOGEN.NS",
    "CONFIPET.NS", "KAMDHENU.NS", "ISGEC.NS", "BALMLAWRIE.NS", "DYNAMATECH.NS",
    "DEN.NS", "STERTOOLS.NS", "KRONOX.NS", "JNKINDIA.NS", "ANUHPHR.NS",
    "REPCOHOME.NS", "GROWWLIQID.NS", "DEEDEV.NS", "TBZ.NS", "IZMO.NS",
    "GOLDCASE.NS", "PSPPROJECT.NS", "ICRA.NS", "DSSL.NS", "LUXIND.NS",
    "FINIETF.NS", "HNGSNGBEES.NS", "CENTUM.NS", "MVGJL.NS", "NAVNETEDUL.NS",
    "SILVRETF.NS", "CLSEL.NS", "VESUVIUS.NS", "TNPL.NS", "MOSMALL250.NS",
    "SHANTIGEAR.NS", "IPL.NS", "SRM.NS", "STYLEBAAZA.NS", "HDFCLIQUID.NS",
    "PRECAM.NS", "OMAXE.NS", "GARFIBRES.NS", "LICMFGOLD.NS", "KANSAINER.NS",
    "ARIHANTCAP.NS", "ORIENTHOT.NS", "BFSI.NS", "PITTIENG.NS", "SANDHAR.NS",
    "OSWALAGRO.NS", "PRABHA.NS", "INDOTECH.NS", "INSECTICID.NS", "URJA.NS",
    "BLKASHYAP.NS", "KROSS.NS", "BEPL.NS", "ADSL.NS", "MOM100.NS",
    "SHREEPUSHK.NS", "GMBREW.NS", "JLHL.NS", "AVROIND.NS", "INDOAMIN.NS",
    "GALAXYSURF.NS", "VEEDOL.NS", "AXITA.NS", "DPABHUSHAN.NS", "VENKEYS.NS",
    "MANALIPETC.NS", "AARTECH.NS", "NAVKARCORP.NS", "GOPAL.NS", "FMGOETZE.NS",
    "DIAMONDYD.NS", "RGL.NS", "ARTEMISMED.NS", "RUPA.NS", "PVSL.NS",
    "SABTNL.NS", "DECCANCE.NS", "ZUARI.NS", "MUKANDLTD.NS", "APOLLOPIPE.NS",
    "SAFARI.NS", "DBCORP.NS", "LINCOLN.NS", "MAHKTECH.NS", "PRIMESECU.NS",
    "IFBIND.NS", "TMB.NS", "RATNAVEER.NS", "GOLDETF.NS", "SHREDIGCEM.NS",
    "GTPL.NS", "MOREALTY.NS", "AUTOAXLES.NS", "ITIETF.NS", "MASFIN.NS",
    "KCP.NS", "AJMERA.NS", "LORDSCHLO.NS", "GREENPLY.NS", "SELAN.NS",
    "RAMRAT.NS", "VSSL.NS", "GUJTHEM.NS", "WINDLAS.NS", "SGIL.NS",
    "20MICRONS.NS", "RSYSTEMS.NS", "ARIES.NS", "ALPHAETF.NS", "BAJAJELEC.NS",
    "STEELCAS.NS", "ORIENTPPR.NS", "CARRARO.NS", "AVADHSUGAR.NS", "SPENCERS.NS",
    "PRECWIRE.NS", "JAICORPLTD.NS", "GANDHAR.NS", "RAJRATAN.NS", "UDAICEMENT.NS",
    "UNIECOM.NS", "WHEELS.NS", "DWARKESH.NS", "GRINFRA.NS", "LOKESHMACH.NS",
    "PLATIND.NS", "WESTLIFE.NS", "DHAMPURSUG.NS", "OMAXAUTO.NS", "TCPLPACK.NS",
    "MAYURUNIQ.NS", "BFINVEST.NS", "AIRAN.NS", "GUJALKALI.NS", "LAXMIDENTL.NS",
    "GPTINFRA.NS", "SATIN.NS", "EIHAHOTELS.NS", "VISHNU.NS", "XPROINDIA.NS",
    "GILT5YBEES.NS", "WONDERLA.NS", "BESTAGRO.NS", "DOLATALGO.NS", "REMSONSIND.NS",
    "EBBETF0430.NS", "RADIANTCMS.NS", "HATSUN.NS", "SILVERCASE.NS", "SURYODAY.NS",
    "SUMMITSEC.NS", "GUFICBIO.NS", "TALBROAUTO.NS", "COFFEEDAY.NS", "ORIENTELEC.NS",
    "TEAMLEASE.NS", "METALIETF.NS", "TEXINFRA.NS", "MMFL.NS", "KECL.NS",
    "SANGAMIND.NS", "IGARASHI.NS", "RUSHIL.NS", "ROLEXRINGS.NS", "XCHANGING.NS",
    "CENTURYPLY.NS", "ASIANENE.NS", "5PAISA.NS", "NUCLEUS.NS", "GHCLTEXTIL.NS",
    "AUTOIND.NS", "BCLIND.NS", "MBLINFRA.NS", "ORISSAMINE.NS", "BODALCHEM.NS",
    "SPLPETRO.NS", "ICICIB22.NS", "AMBIKCO.NS", "DYNPRO.NS", "KINGFA.NS",
    "EGOLD.NS", "INDIANHUME.NS", "MUFTI.NS", "STARCEMENT.NS", "GANESHBE.NS",
    "BOROLTD.NS", "MUNJALAU.NS", "SHALBY.NS", "PPL.NS", "ASTEC.NS",
    "ZUARIIND.NS", "ACCELYA.NS", "MUTHOOTCAP.NS", "PTL.NS", "UFLEX.NS",
    "SAGCEM.NS", "LIQUIDSBI.NS", "STOVEKRAFT.NS", "HDFCNIFTY.NS", "AGARIND.NS",
    "MANGLMCEM.NS", "ADOR.NS", "NPST.NS", "CONSUMBEES.NS", "SIMPLEXINF.NS",
    "ESAFSFB.NS", "HINDWAREAP.NS", "VETO.NS", "ESTER.NS", "MODISONLTD.NS",
    "BHAGCHEM.NS", "SIS.NS", "ATULAUTO.NS", "NEXT50.NS", "SETFNN50.NS",
    "VIKASLIFE.NS", "LIQUIDSHRI.NS", "JAYNECOIND.NS", "CHEMPLASTS.NS", "MASTERTR.NS",
    "SASKEN.NS", "RPEL.NS", "SNOWMAN.NS", "VINDHYATEL.NS", "HERANBA.NS",
    "OILIETF.NS", "GOLDETFADD.NS", "DREDGECORP.NS", "MIDCAPIETF.NS", "AHLUCONT.NS",
    "SOMANYCERA.NS", "DOLLAR.NS", "GROWWGOLD.NS", "HEUBACHIND.NS", "YATRA.NS",
    "SCHAND.NS", "MANAKCOAT.NS", "KAMATHOTEL.NS", "HARSHA.NS", "CREATIVE.NS",
    "MONTECARLO.NS", "SCILAL.NS", "SENSEXIETF.NS", "FOSECOIND.NS", "TRF.NS",
    "CCCL.NS", "SURANASOL.NS", "VIDHIING.NS", "JINDALPOLY.NS", "PANAMAPET.NS",
    "SHIVALIK.NS", "BOROSCI.NS", "ESABINDIA.NS", "SEAMECLTD.NS", "TARSONS.NS",
    "INTERNET.NS", "UNIPARTS.NS", "RML.NS", "PSUBANK.NS", "BIRLANU.NS",
    "MANCREDIT.NS", "LIKHITHA.NS", "GREENLAM.NS", "PYRAMID.NS", "HPAL.NS",
    "RPTECH.NS", "FAIRCHEMOR.NS", "OMINFRAL.NS", "IRMENERGY.NS", "IKIO.NS",
    "TARACHAND.NS", "EXPLEOSOL.NS", "SMSPHARMA.NS", "TOLINS.NS", "MIDSMALL.NS",
    "SATIA.NS", "IT.NS", "DCMSRIND.NS", "EXCEL.NS", "UNICHEMLAB.NS",
    "UFO.NS", "LANDMARK.NS", "REPRO.NS", "GSS.NS", "UTTAMSUGAR.NS",
    "NELCAST.NS", "ONMOBILE.NS", "STANLEY.NS", "TINNARUBR.NS", "ITDC.NS",
    "SINCLAIR.NS", "ICEMAKE.NS", "MCLEODRUSS.NS", "THEMISMED.NS", "PUNJABCHEM.NS",
    "JAGRAN.NS", "SHREERAMA.NS", "ASHIANA.NS", "MOMOMENTUM.NS", "GSLSU.NS",
    "ADFFOODS.NS", "JAYSREETEA.NS", "PSUBNKIETF.NS", "RADHIKAJWE.NS", "HAPPYFORGE.NS",
    "QGOLDHALF.NS", "AFSL.NS", "IGPL.NS", "SPAL.NS", "CIFL.NS",
    "VIKASECO.NS", "SANGHIIND.NS", "JITFINFRA.NS", "ACLGATI.NS", "PDMJEPAPER.NS",
    "EVINDIA.NS", "3IINFOLTD.NS", "UGARSUGAR.NS", "UNITEDTEA.NS", "TVTODAY.NS",
    "MALLCOM.NS", "HEALTHIETF.NS", "SUPREME.NS", "DBSTOCKBRO.NS", "INFRABEES.NS",
    "YASHO.NS", "MIDCAP.NS", "GEEKAYWIRE.NS", "MADRASFERT.NS", "BSLNIFTY.NS",
    "AONETOTAL.NS", "MANAKSTEEL.NS", "KIOCL.NS", "RBZJEWEL.NS", "KUANTUM.NS",
    "CELEBRITY.NS", "HDFCNIF100.NS", "GROWWNET.NS", "GTL.NS", "TCIEXP.NS",
    "GROWWRAIL.NS", "GOLDSHARE.NS", "MEDICAMEQ.NS", "NV20IETF.NS", "GROWWEV.NS",
    "AFFORDABLE.NS", "VAISHALI.NS", "VSTL.NS", "SPECIALITY.NS", "KOKUYOCMLN.NS",
    "KSOLVES.NS", "SILVERTUC.NS", "ASMS.NS", "HLVLTD.NS", "HGS.NS",
    "NIFTY50ADD.NS", "BHAGYANGR.NS", "YUKEN.NS", "PRAENG.NS", "BSE500IETF.NS",
    "MID150CASE.NS", "GROWWN200.NS", "BLAL.NS", "SUNDROP.NS", "ANDHRSUGAR.NS",
    "DMCC.NS", "MANBA.NS", "VRAJ.NS", "HMAAGRO.NS", "MAGADSUGAR.NS",
    "ALPL30IETF.NS", "WEALTH.NS", "DBEIL.NS", "TNIDETF.NS", "UMIYA-MRO.NS",
    "ATL.NS", "INTLCONV.NS", "PVP.NS", "ANDHRAPAP.NS", "GENUSPAPER.NS",
    "INDOWIND.NS", "TVSSRICHAK.NS", "HDFCMOMENT.NS", "NIF100BEES.NS", "OSWALGREEN.NS",
    "GNA.NS", "APCOTEXIND.NS", "MMP.NS", "SBIETFIT.NS", "FCSSOFT.NS",
    "LANCORHOL.NS", "SURAKSHA.NS", "SPECTRUM.NS", "MANGALAM.NS", "DIAMINESQ.NS",
    "TIPSFILMS.NS", "ABSLPSE.NS", "AFIL.NS", "BALAJEE.NS", "GILLANDERS.NS",
    "INTENTECH.NS", "AURUM.NS", "RANEHOLDIN.NS", "DPSCLTD.NS", "UTINIFTETF.NS",
    "BHAGERIA.NS", "HDFCMID150.NS", "MONQ50.NS", "APEX.NS", "RUCHIRA.NS",
    "CAPITALSFB.NS", "BUTTERFLY.NS", "MUKKA.NS", "VARDMNPOLY.NS", "MOLDTECH.NS",
    "AVG.NS", "SHALPAINTS.NS", "UCAL.NS", "MONIFTY500.NS", "MAXIND.NS",
    "DENORA.NS", "TPLPLASTEH.NS", "VLSFINANCE.NS", "MIRZAINT.NS", "SOTL.NS",
    "MEGASTAR.NS", "ABAN.NS", "GUJAPOLLO.NS", "SUNCLAY.NS", "MATRIMONY.NS",
    "BPL.NS", "MAHEPC.NS", "DEVIT.NS", "SAURASHCEM.NS", "DONEAR.NS",
    "NILKAMAL.NS", "GOACARBON.NS", "CLEDUCATE.NS", "TEXMOPIPES.NS", "JPOLYINVST.NS",
    "AYMSYNTEX.NS", "ALBERTDAVD.NS", "SSDL.NS", "MENONBE.NS", "SHARIABEES.NS",
    "RUBFILA.NS", "DVL.NS", "UNIDT.NS", "JAYAGROGN.NS", "EMAMIPAP.NS",
    "FIBERWEB.NS", "DPWIRES.NS", "LYKALABS.NS", "METAL.NS", "MAWANASUG.NS",
    "GULFPETRO.NS", "ABSLLIQUID.NS", "BANARISUG.NS", "HDFCNIFIT.NS", "RUBYMILLS.NS",
    "COASTCORP.NS", "MEDICO.NS", "RHL.NS", "KOTHARIPET.NS", "MOVALUE.NS",
    "SILLYMONKS.NS", "RELCHEMQ.NS", "AONENIFTY.NS", "TOP100CASE.NS", "PREMIERPOL.NS",
    "MOKSH.NS", "SETFNIFBK.NS", "BIGBLOC.NS", "CENTENKA.NS", "CHEMCON.NS",
    "AVTNPL.NS", "SUMIT.NS", "KMSUGAR.NS", "SESHAPAPER.NS", "TTKHLTCARE.NS",
    "RACLGEAR.NS", "UNITEDPOLY.NS", "DAVANGERE.NS", "RSWM.NS", "BASML.NS",
    "GOLDTECH.NS", "DIVGIITTS.NS", "BANKIETF.NS", "TIMESGTY.NS", "MIRCELECTR.NS",
    "SEMAC.NS", "JAYBARMARU.NS", "GROWWMOM50.NS", "SASTASUNDR.NS", "ALMONDZ.NS",
    "CONSUMIETF.NS", "NAHARSPING.NS", "ESSENTIA.NS", "SBIETFPB.NS", "TREJHARA.NS",
    "STARTECK.NS", "CREST.NS", "MNC.NS", "INFOBEAN.NS", "AIROLAM.NS",
    "DIVOPPBEES.NS", "AKSHARCHEM.NS", "ALLDIGI.NS", "GLOSTERLTD.NS", "ZIMLAB.NS",
    "RKSWAMY.NS", "JUBLCPL.NS", "ADVANIHOTR.NS", "DOLPHIN.NS", "IMPAL.NS",
    "HESTERBIO.NS", "PRITI.NS", "UTIBANKETF.NS", "KCPSUGIND.NS", "CSLFINANCE.NS",
    "CORDSCABLE.NS", "SOFTTECH.NS", "GLOBALVECT.NS", "LAGNAM.NS", "CROWN.NS",
    "HDFCNEXT50.NS", "GRPLTD.NS", "EBBETF0431.NS", "CHEVIOT.NS", "AARON.NS",
    "HDFCSENSEX.NS", "NIF100IETF.NS", "BANSWRAS.NS", "EVIETF.NS", "DUCON.NS",
    "BSLGOLDETF.NS", "MIDSELIETF.NS", "AMJLAND.NS", "ECAPINSURE.NS", "BBETF0432.NS",
    "SAKHTISUG.NS", "TREL.NS", "MAGNUM.NS", "OILCOUNTUB.NS", "ESG.NS",
    "GFLLIMITED.NS", "BAIDFIN.NS", "LATTEYS.NS", "OAL.NS", "SADBHAV.NS",
    "SUKHJITS.NS", "NV20BEES.NS", "AXISTECETF.NS", "MHLXMIRU.NS", "AJOONI.NS",
    "DJML.NS", "VHL.NS", "PRITIKAUTO.NS", "EMULTIMQ.NS", "TRANSWORLD.NS",
    "KAUSHALYA.NS", "NV20.NS", "NIPPOBATRY.NS", "MOMIDMTM.NS", "EMMBI.NS",
    "CCHHL.NS", "HARRMALAYA.NS", "PODDARMENT.NS", "GANDHITUBE.NS", "STEELCITY.NS",
    "ACCURACY.NS", "KHADIM.NS", "SURYALAXMI.NS", "INVENTURE.NS", "PONNIERODE.NS",
    "HDFCBSE500.NS", "RANASUG.NS", "RACE.NS", "SILVER360.NS", "LOYALTEX.NS",
    "MULTICAP.NS", "CHEMFAB.NS", "BANARBEADS.NS", "INDSWFTLTD.NS", "VALIANTLAB.NS",
    "CINELINE.NS", "ALPHAGEO.NS", "KRITINUT.NS", "SELECTIPO.NS", "USK.NS",
    "WILLAMAGOR.NS", "UYFINCORP.NS", "SIKKO.NS", "GSEC10IETF.NS", "UTINEXT50.NS",
    "AMNPLST.NS", "CONSOFINVT.NS", "MITTAL.NS", "UNIENTER.NS", "TECH.NS",
    "ORIENTCER.NS", "ALPA.NS", "HEALTHY.NS", "SURAJLTD.NS", "EQUAL50ADD.NS",
    "COMMOIETF.NS", "BHANDARI.NS", "INDIANCARD.NS", "KRITIKA.NS", "SONAMLTD.NS",
    "PASUPTAC.NS", "MANAKALUCO.NS", "VISHWARAJ.NS", "SUPERHOUSE.NS", "AKSHOPTFBR.NS",
    "RPPL.NS", "IVZINGOLD.NS", "BHARATGEAR.NS", "AXISNIFTY.NS", "TOUCHWOOD.NS",
    "TAINWALCHM.NS", "MANAKSIA.NS", "HDFCPVTBAN.NS", "NINSYS.NS", "ADROITINFO.NS",
    "KOHINOOR.NS", "NARMADA.NS", "PLAZACABLE.NS", "MITCON.NS", "SCPL.NS",
    "MURUDCERA.NS", "ITETFADD.NS", "ARCHIDPLY.NS", "LOVABLE.NS", "DTIL.NS",
    "CONSUMER.NS", "PATINTLOG.NS", "NIFITETF.NS", "SUNDRMBRAK.NS", "WORTH.NS",
    "PAVNAIND.NS", "APOLSINHOT.NS", "HDFCGROWTH.NS", "DCMNVL.NS", "QNIFTY.NS",
    "BALPHARMA.NS", "HINDCOMPOS.NS", "NBIFIN.NS", "IVC.NS", "ELDEHSG.NS",
    "MOHITIND.NS", "LOTUSEYE.NS", "SURANAT&P.NS", "PLASTIBLEN.NS", "BALKRISHNA.NS",
    "PRIMO.NS", "BANKBETF.NS", "EBBETF0433.NS", "LAMBODHARA.NS", "BSHSL.NS",
    "SENSEXETF.NS", "ZODIACLOTH.NS", "KAPSTON.NS", "MOHEALTH.NS", "ORIENTBELL.NS",
    "NDLVENTURE.NS", "AHLEAST.NS", "BTML.NS", "VARDHACRLC.NS", "KALYANIFRG.NS",
    "MAHESHWARI.NS", "ATAM.NS", "DCI.NS", "BANKETFADD.NS", "TOKYOPLAST.NS",
    "AGRITECH.NS", "BCONCEPTS.NS", "KOTHARIPRO.NS", "GVPTECH.NS", "DIGIDRIVE.NS",
    "RKEC.NS", "STARPAPER.NS", "RAJSREESUG.NS", "ACL.NS", "HDFCVALUE.NS",
    "PRAKASHSTL.NS", "NITIRAJ.NS", "SHAHALLOYS.NS", "THEINVEST.NS", "NIFTYBETF.NS",
    "TOTAL.NS", "TRIGYN.NS", "SIL.NS", "DIGISPICE.NS", "SHRADHA.NS",
    "MOMENTUM.NS", "SAHYADRI.NS", "MOLOWVOL.NS", "NECCLTD.NS", "SALSTEEL.NS",
    "GANGAFORGE.NS", "HDFCNIFBAN.NS", "JMA.NS", "ENIL.NS", "SUPERSPIN.NS",
    "HITECHCORP.NS", "DHUNINV.NS", "IVP.NS", "CPCAP.NS", "GOKUL.NS",
    "PIONEEREMB.NS", "BBTCL.NS", "ISFT.NS", "MOM50.NS", "GEECEE.NS",
    "KOTARISUG.NS", "REPL.NS", "MAKEINDIA.NS", "PSUBANKADD.NS", "BEARDSELL.NS",
    "BANKETF.NS", "LAXMICOT.NS", "ROSSELLIND.NS", "HPIL.NS", "HDFCQUAL.NS",
    "CORALFINAC.NS", "UTISENSETF.NS", "JAIPURKURT.NS", "MCL.NS", "AXISBNKETF.NS",
    "MID150.NS", "MIDQ50ADD.NS", "SRGHFL.NS", "AROGRANITE.NS", "LICNETFGSC.NS",
    "OSWALSEEDS.NS", "AMDIND.NS", "NIRAJ.NS", "QUAL30IETF.NS", "SBIETFCON.NS",
    "GLOBE.NS", "XELPMOC.NS", "NIFTYQLITY.NS", "ABSLNN50ET.NS", "INDOUS.NS",
    "HMVL.NS", "HDFCPSUBK.NS", "VIJIFIN.NS", "BAGFILMS.NS", "GSEC5IETF.NS",
    "SILINV.NS", "LICNMID100.NS", "NATCAPSUQ.NS", "ATLANTAA.NS", "BEDMUTHA.NS",
    "AHLADA.NS", "SANDESH.NS", "DAMODARIND.NS", "GANGESSECU.NS", "GOYALALUM.NS",
    "SHIVAMAUTO.NS", "JETFREIGHT.NS", "SMARTLINK.NS", "STEL.NS", "AARVI.NS",
    "AKG.NS", "COMPUSOFT.NS", "HINDCON.NS", "ANMOL.NS", "21STCENMGM.NS",
    "SREEL.NS", "BANG.NS", "SOMICONVEY.NS", "KANORICHEM.NS", "ANIKINDS.NS",
    "PRUDMOULI.NS", "INDTERRAIN.NS", "NIFMID150.NS", "SBIBPB.NS", "GOLD360.NS",
    "ORIENTLTD.NS", "SETF10GILT.NS", "SUNDARAM.NS", "SHIVATEX.NS", "HEXATRADEX.NS",
    "GROWWLOVOL.NS", "SBINEQWETF.NS", "KAKATCEM.NS", "SADBHIN.NS", "ZENITHEXPO.NS",
    "JHS.NS", "KSHITIJPOL.NS", "XTGLOBAL.NS", "SHRENIK.NS", "SMLT.NS",
    "MARALOVER.NS", "GSEC10YEAR.NS", "MANOMAY.NS", "AXISHCETF.NS", "AGROPHOS.NS",
    "BVCL.NS", "INDBANK.NS", "SNXT30BEES.NS", "LFIC.NS", "RVHL.NS",
    "SMSLIFE.NS", "AAATECH.NS", "ASPINWALL.NS", "ALKALI.NS", "AXISCETF.NS",
    "MOALPHA50.NS", "JISLDVREQS.NS", "WEIZMANIND.NS", "UTISXN50.NS", "TOP15IETF.NS",
    "RADIOCITY.NS", "RELIABLE.NS", "NETF.NS", "NDGL.NS", "AMBICAAGAR.NS",
    "VAL30IETF.NS", "RKDL.NS", "SAGARDEEP.NS", "BANKA.NS", "MALUPAPER.NS",
    "ANTGRAPHIC.NS", "3PLAND.NS", "LOWVOL1.NS", "PARASPETRO.NS", "RETAIL.NS",
    "PEARLPOLY.NS", "SANGINITA.NS", "WEWIN.NS", "TGBHOTELS.NS", "AXISBPSETF.NS",
    "LIBAS.NS", "AXISVALUE.NS", "SBIETFQLTY.NS", "NIFTY100EW.NS", "MAHAPEXLTD.NS",
    "MSCIINDIA.NS", "DNAMEDIA.NS", "LICNETFN50.NS", "KANANIIND.NS", "MOQUALITY.NS",
    "SAMBHAAV.NS", "LPDC.NS", "ASTRON.NS", "JOCIL.NS", "GUJRAFFIA.NS",
    "BANKPSU.NS", "NEXT30ADD.NS", "MADHAV.NS", "NGIL.NS", "HEADSUP.NS",
    "LOWVOL.NS", "IDFNIFTYET.NS", "ASHOKAMET.NS", "LEXUS.NS", "CONS.NS",
    "MOGSEC.NS", "AXSENSEX.NS", "GKWLIMITED.NS", "SAMPANN.NS", "DICIND.NS",
    "KHANDSE.NS", "MOTOUR.NS", "MONEXT50.NS", "PVTBANKADD.NS", "BAFNAPH.NS",
    "BBNPPGOLD.NS", "OBCL.NS", "SHIVAMILLS.NS", "HEALTHADD.NS", "EQUAL200.NS",
    "ARVEE.NS", "WIPL.NS", "BSLSENETFG.NS", "AKASH.NS", "RADAAN.NS",
    "CYBERMEDIA.NS", "SDL26BEES.NS", "HDFCLOWVOL.NS", "MOINFRA.NS", "BLBLIMITED.NS",
    "MUKTAARTS.NS", "SENSEXADD.NS", "UNIONGOLD.NS", "LICNETFSEN.NS", "NAGREEKEXP.NS",
    "PALASHSECU.NS", "MON50EQUAL.NS", "NEXTMEDIA.NS", "VIVIDHA.NS", "NIF5GETF.NS",
    "LICNFNHGP.NS", "MOTOGENFIN.NS", "UMESLTD.NS", "SINTERCOM.NS", "EQUAL50.NS",
    "MODTHREAD.NS", "ACEINTEG.NS", "NPBET.NS", "IVZINNIFTY.NS", "MOPSE.NS",
    "EUROTEXIND.NS", "NIF10GETF.NS", "MOMGF.NS", "BBNPNBETF.NS", "NKIND.NS"
]

    except Exception as e:
        print(f"⚠️ Could not fetch NIFTY 100: {e}")
        return ["RELIANCE.NS", "TCS.NS"]

# ------------------------------------------------------------------
# Analyze a single stock
# ------------------------------------------------------------------
def analyze_stock(ticker):
    print(f"\n📊 Analyzing: {ticker}")
    try:
        df = yf.download(ticker, period="3mo", interval="1d", progress=False)

        if isinstance(df.columns, pd.MultiIndex):
            df.columns = df.columns.get_level_values(0)
        df.columns.name = None

        df = df[['Open', 'High', 'Low', 'Close', 'Volume']].dropna()
        df = df.astype(float)

        if df.empty or len(df) < 50:
            print("⚠️ Not enough data.")
            return None

        df = calculate_additional_indicators(df)
        df.dropna(inplace=True)

        # Attach candle pattern
        df['Candle'] = "None"
        df.at[df.index[-1], 'Candle'] = detect_candle_pattern(df)

        latest = df.iloc[-1]
        previous = df.iloc[-2]

        score, matched_indicators = advanced_strategy_score(latest, previous)
        print(f"🧠 {ticker} Strategy Score: {score:.2f}")

        if score < SCORE_THRESHOLD:
            return None

        print(f"\n📊 Matched : {ticker}")

        history = df.tail(30).copy()
        history_json = [
            {
                "date": str(idx.date()),
                "close": round(row.Close, 2),
                "ema": round(row.EMA_50, 2),
                "rsi": round(row.RSI, 2),
                "macd": round(row.MACD, 2),
                "signal": round(row.Signal, 2),
                "hist": round(row.MACD_Hist, 2),
                "volume": int(row.Volume),
                "volumeAvg": int(row.Volume_avg),
                "willr": round(row.WilliamsR, 2),
                "atr": round(row.ATR, 2),
                "bb_pos": round(row.BB_Position, 2),
                "priceChange1D": round(row.Price_Change_1D, 2),
                "priceChange3D": round(row.Price_Change_3D, 2),
                "priceChange5D": round(row.Price_Change_5D, 2),
                "stochK": round(row.Stoch_K, 2),
                "stochD": round(row.Stoch_D, 2),
                "signal_trigger": bool(row.get("Signal_Trigger", False)),
                "sell_trigger": bool(row.get("Sell_Trigger", False)),
            }
            for idx, row in history.iterrows()
        ]

        return {
            "ticker": ticker,
            "close": round(latest['Close'], 2),
            "ema": round(latest['EMA_50'], 2),
            "rsi": round(latest['RSI'], 2),
            "macd": round(latest['MACD'], 2),
            "signal": round(latest['Signal'], 2),
            "hist": round(latest['MACD_Hist'], 2),
            "volume": int(latest['Volume']),
            "volumeAvg": int(latest['Volume_avg']),
            "willr": round(latest['WilliamsR'], 2),
            "atr": round(latest['ATR'], 2),
            "bb_pos": round(latest['BB_Position'], 2),
            "priceChange1D": round(latest['Price_Change_1D'], 2),
            "priceChange3D": round(latest['Price_Change_3D'], 2),
            "priceChange5D": round(latest['Price_Change_5D'], 2),
            "stochK": round(latest['Stoch_K'], 2),
            "stochD": round(latest['Stoch_D'], 2),
            "pattern": latest['Candle'],
            "score": round(score, 2),
            "matched_indicators": matched_indicators,
            "history": history_json
        }

    except Exception as e:
        print(f"❌ Error analyzing {ticker}: {e}")
        return None

# ------------------------------------------------------------------
# Run Screener
# ------------------------------------------------------------------
def run_screener():
    matches = []
    tickers = fetch_nifty_100()

    for ticker in tickers:
        stock = analyze_stock(ticker)
        if stock:
            matches.append(stock)
        time.sleep(0.2)

    if matches:
        for stock in matches:
            msg = (
                f"🎯 *{stock['ticker']}*\n"
                f"Price: ₹{stock['close']} | EMA50: {stock['ema']}\n"
                f"RSI: {stock['rsi']} | Williams %R: {stock['willr']}\n"
                f"MACD: {stock['macd']} | Signal: {stock['signal']} | Hist: {stock['hist']}\n"
                f"Volume: {stock['volume']} | Avg: {stock['volumeAvg']}\n"
                f"BB Pos: {stock['bb_pos']} | ATR: {stock['atr']}\n"
                f"% Change: 1D {stock['priceChange1D']}%, 3D {stock['priceChange3D']}%, 5D {stock['priceChange5D']}%\n"
                f"Stoch %K: {stock['stochK']} | %D: {stock['stochD']}\n"
                f"Candle: {stock['pattern']} | Score: {stock['score']}\n"
            )
            send_telegram(msg)
    else:
        send_telegram("🚫 *No stocks matched advanced criteria today.*")

if __name__ == "__main__":
    run_screener()
