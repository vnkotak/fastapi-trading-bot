import yfinance as yf 
import pandas as pd
import time
from indicators import (
    calculate_additional_indicators,
    advanced_strategy_score,
    send_telegram,
    detect_candle_pattern,
    SCORE_THRESHOLD
)

# ------------------------------------------------------------------
# List of stocks (can later be dynamic from NSE CSV)
# ------------------------------------------------------------------
def fetch_nifty_100():
    try:
        return [
           #  "VMM.NS", "NTPCGREEN.NS", "MCX.NS", "CREDITACC.NS", "RELIANCE.NS","TCS.NS"
            # "AADHARHFC.NS",	"AARTIIND.NS",	"ACE.NS",	"ABREL.NS",	"AEGISLOG.NS",	"AFCONS.NS",	"AFFLE.NS",	"ARE&M.NS",	"AMBER.NS",	"ANANTRAJ.NS",	"ANGELONE.NS",	"ASTERDM.NS",	"ATUL.NS",	"BEML.NS",	"BLS.NS",	"BATAINDIA.NS",	"BSOFT.NS",	"FIRSTCRY.NS",	"BRIGADE.NS",	"CESC.NS",	"CASTROLIND.NS",	"CDSL.NS",	"CHAMBLFERT.NS",	"CAMS.NS",	"CREDITACC.NS",	"CROMPTON.NS",	"CYIENT.NS",	"DATAPATTNS.NS",	"DELHIVERY.NS",	"DEVYANI.NS",	"LALPATHLAB.NS",	"FSL.NS",	"FIVESTAR.NS",	"GRSE.NS",	"GODIGIT.NS",	"GODFRYPHLP.NS",	"GESHIP.NS",	"GSPL.NS",	"HBLENGINE.NS",	"HFCL.NS",	"HSCL.NS",	"HINDCOPPER.NS",	"IDBI.NS",	"IFCI.NS",	"IIFL.NS",	"IRCON.NS",	"ITI.NS",	"INDIAMART.NS",	"IEX.NS",	"INOXWIND.NS",	"IGIL.NS",	"IKS.NS",	"JBMA.NS",	"JWL.NS",	"KPIL.NS",	"KARURVYSYA.NS",	"KAYNES.NS",	"KEC.NS",	"KFINTECH.NS",	"LAURUSLABS.NS",	"MGL.NS",	"MANAPPURAM.NS",	"MCX.NS",	"NATCOPHARM.NS",	"NBCC.NS",	"NCC.NS",	"NH.NS",	"NAVINFLUOR.NS",	"NEULANDLAB.NS",	"NEWGEN.NS",	"NUVAMA.NS",	"PCBL.NS",	"PGEL.NS",	"PNBHOUSING.NS",	"PVRINOX.NS",	"PEL.NS",	"PPLPHARMA.NS",	"POONAWALLA.NS",	"RITES.NS",	"RADICO.NS",	"RAILTEL.NS",	"RKFORGE.NS",	"REDINGTON.NS",	"RPOWER.NS",	"SAGILITY.NS",	"SHYAMMETL.NS",	"SIGNATURE.NS",	"SONATSOFTW.NS",	"SWANENERGY.NS",	"TATACHEM.NS",	"TTML.NS",	"TEJASNET.NS",	"RAMCOCEM.NS",	"TITAGARH.NS",	"TRIDENT.NS",	"TRITURBINE.NS",	"WELCORP.NS",	"WELSPUNLIV.NS",	"ZENTEC.NS",	"ZENSARTECH.NS",	"ACC.NS",	"APLAPOLLO.NS",	"AUBANK.NS",	"ATGL.NS",	"ABCAPITAL.NS",	"ABFRL.NS",	"ALKEM.NS",	"APOLLOTYRE.NS",	"ASHOKLEY.NS",	"ASTRAL.NS",	"AUROPHARMA.NS",	"BSE.NS",	"BANDHANBNK.NS",	"BANKINDIA.NS",	"MAHABANK.NS",	"BDL.NS",	"BHARATFORG.NS",	"BHEL.NS",	"BHARTIHEXA.NS",	"BIOCON.NS",	"COCHINSHIP.NS",	"COFORGE.NS",	"COLPAL.NS",	"CONCOR.NS",	"CUMMINSIND.NS",	"DIXON.NS",	"ESCORTS.NS",	"EXIDEIND.NS",	"NYKAA.NS",	"FEDERALBNK.NS",	"GMRAIRPORT.NS",	"GLENMARK.NS",	"GODREJPROP.NS",	"HDFCAMC.NS",	"HINDPETRO.NS",	"HINDZINC.NS",	"HUDCO.NS",	"IDFCFIRSTB.NS",	"IRB.NS",	"INDIANB.NS",	"IRCTC.NS",	"IREDA.NS",	"IGL.NS",	"INDUSTOWER.NS",	"JUBLFOOD.NS",	"KPITTECH.NS",	"KALYANKJIL.NS",	"LTF.NS",	"LICHSGFIN.NS",	"LUPIN.NS",	"MRF.NS",	"M&MFIN.NS",	"MANKIND.NS",	"MARICO.NS",	"MFSL.NS",	"MAXHEALTH.NS",	"MAZDOCK.NS",	"MOTILALOFS.NS",	"MPHASIS.NS",	"MUTHOOTFIN.NS",	"NHPC.NS",	"NMDC.NS",	"NTPCGREEN.NS",	"NATIONALUM.NS",	"OBEROIRLTY.NS",	"OIL.NS",	"OLAELEC.NS",	"PAYTM.NS",	"OFSS.NS",	"POLICYBZR.NS",	"PIIND.NS",	"PAGEIND.NS",	"PATANJALI.NS",	"PERSISTENT.NS",	"PETRONET.NS",	"PHOENIXLTD.NS",	"POLYCAB.NS",	"PREMIERENE.NS",	"PRESTIGE.NS",	"RVNL.NS",	"SBICARD.NS",	"SJVN.NS",	"SRF.NS",	"SOLARINDS.NS",	"SONACOMS.NS",	"SAIL.NS",	"SUPREMEIND.NS",	"SUZLON.NS",	"TATACOMM.NS",	"TATAELXSI.NS",	"TATATECH.NS",	"TORNTPOWER.NS",	"TIINDIA.NS",	"UPL.NS",	"UNIONBANK.NS",	"VMM.NS",	"IDEA.NS",	"VOLTAS.NS",	"WAAREEENER.NS",	"YESBANK.NS",	"ABB.NS",	"ADANIENSOL.NS",	"ADANIENT.NS",	"ADANIGREEN.NS",	"ADANIPORTS.NS",	"ADANIPOWER.NS",	"AMBUJACEM.NS",	"APOLLOHOSP.NS",	"ASIANPAINT.NS",	"DMART.NS",	"AXISBANK.NS",	"BAJAJ-AUTO.NS",	"BAJFINANCE.NS",	"BAJAJFINSV.NS",	"BAJAJHLDNG.NS",	"BAJAJHFL.NS",	"BANKBARODA.NS",	"BEL.NS",	"BPCL.NS",	"BHARTIARTL.NS",	"BOSCHLTD.NS",	"BRITANNIA.NS",	"CGPOWER.NS",	"CANBK.NS",	"CHOLAFIN.NS",	"CIPLA.NS",	"COALINDIA.NS",	"DLF.NS",	"DABUR.NS",	"DIVISLAB.NS",	"DRREDDY.NS",	"EICHERMOT.NS",	"ETERNAL.NS",	"GAIL.NS",	"GODREJCP.NS",	"GRASIM.NS",	"HCLTECH.NS",	"HDFCBANK.NS",	"HDFCLIFE.NS",	"HAVELLS.NS",	"HEROMOTOCO.NS",	"HINDALCO.NS",	"HAL.NS",	"HINDUNILVR.NS",	"HYUNDAI.NS",	"ICICIBANK.NS",	"ICICIGI.NS",	"ICICIPRULI.NS",	"ITC.NS",	"INDHOTEL.NS",	"IOC.NS",	"IRFC.NS",	"INDUSINDBK.NS",	"NAUKRI.NS",	"INFY.NS",	"INDIGO.NS",	"JSWENERGY.NS",	"JSWSTEEL.NS",	"JINDALSTEL.NS",	"JIOFIN.NS",	"KOTAKBANK.NS",	"LTIM.NS",	"LT.NS",	"LICI.NS",	"LODHA.NS",	"M&M.NS",	"MARUTI.NS",	"NTPC.NS",	"NESTLEIND.NS",	"ONGC.NS",	"PIDILITIND.NS",	"PFC.NS",	"POWERGRID.NS",	"PNB.NS",	"RECLTD.NS",	"RELIANCE.NS",	"SBILIFE.NS",	"MOTHERSON.NS",	"SHREECEM.NS",	"SHRIRAMFIN.NS",	"SIEMENS.NS",	"SBIN.NS",	"SUNPHARMA.NS",	"SWIGGY.NS",	"TVSMOTOR.NS",	"TCS.NS",	"TATACONSUM.NS",	"TATAMOTORS.NS",	"TATAPOWER.NS",	"TATASTEEL.NS",	"TECHM.NS",	"TITAN.NS",	"TORNTPHARM.NS",	"TRENT.NS",	"ULTRACEMCO.NS",	"UNITDSPR.NS",	"VBL.NS",	"VEDL.NS",	"WIPRO.NS",	"ZYDUSLIFE.NS"
        # ]
            Â "20MICRONS.NS","21STCENMGM.NS","360ONE.NS","3IINFOLTD.NS","3MINDIA.NS","3PLAND.NS","5PAISA.NS","63MOONS.NS","AAATECH.NS","AADHARHFC.NS","AARON.NS","AARTECH.NS","AARTIDRUGS.NS","AARTIIND.NS","AARTIPHARM.NS","AARVI.NS","AAVAS.NS","ABAN.NS","ABB.NS","ABBOTINDIA.NS","ABCAPITAL.NS","ABDL.NS","ABFRL.NS","ABLBL.NS","ABREL.NS","ABSLAMC.NS","ACC.NS","ACCELYA.NS","ACCURACY.NS","ACE.NS","ACEINTEG.NS","ACI.NS","ACL.NS","ACLGATI.NS","ACMESOLAR.NS","ACUTAAS.NS","ADANIENSOL.NS","ADANIENT.NS","ADANIGREEN.NS","ADANIPORTS.NS","ADANIPOWER.NS","ADFFOODS.NS","ADOR.NS","ADROITINFO.NS","ADSL.NS","ADVANIHOTR.NS","ADVENZYMES.NS","AEGISLOG.NS","AEGISVOPAK.NS","AEROENTER.NS","AEROFLEX.NS","AETHER.NS","AFCONS.NS","AFFLE.NS","AFFORDABLE.NS","AFIL.NS","AFSL.NS","AGARIND.NS","AGARWALEYE.NS","AGI.NS","AGIIL.NS","AGRITECH.NS","AGROPHOS.NS","AHLADA.NS","AHLEAST.NS","AHLUCONT.NS","AIAENG.NS","AIIL.NS","AIRAN.NS","AIROLAM.NS","AJANTPHARM.NS","AJAXENGG.NS","AJMERA.NS","AJOONI.NS","AKASH.NS","AKG.NS","AKSHARCHEM.NS","AKSHOPTFBR.NS","AKUMS.NS","AKZOINDIA.NS","ALANKIT.NS","ALBERTDAVD.NS","ALEMBICLTD.NS","ALICON.NS","ALIVUS.NS","ALKALI.NS","ALKEM.NS","ALKYLAMINE.NS","ALLCARGO.NS","ALLDIGI.NS","ALMONDZ.NS","ALOKINDS.NS","ALPA.NS","ALPHAGEO.NS","AMBER.NS","AMBICAAGAR.NS","AMBIKCO.NS","AMBUJACEM.NS","AMDIND.NS","AMJLAND.NS","AMNPLST.NS","AMRUTANJAN.NS","ANANDRATHI.NS","ANANTRAJ.NS","ANDHRAPAP.NS","ANDHRSUGAR.NS","ANGELONE.NS","ANIKINDS.NS","ANMOL.NS","ANTGRAPHIC.NS","ANUHPHR.NS","ANUP.NS","ANURAS.NS","APARINDS.NS","APCOTEXIND.NS","APEX.NS","APLAPOLLO.NS","APLLTD.NS","APOLLO.NS","APOLLOHOSP.NS","APOLLOPIPE.NS","APOLLOTYRE.NS","APOLSINHOT.NS","APTUS.NS","ARCHIDPLY.NS","ARE&M.NS","ARIES.NS","ARIHANTCAP.NS","ARIHANTSUP.NS","ARISINFRA.NS","ARKADE.NS","ARMANFIN.NS","AROGRANITE.NS","ARTEMISMED.NS","ARVEE.NS","ARVIND.NS","ARVINDFASN.NS","ARVSMART.NS","ASAHIINDIA.NS","ASAL.NS","ASALCBR.NS","ASHAPURMIN.NS","ASHIANA.NS","ASHOKA.NS","ASHOKAMET.NS","ASHOKLEY.NS","ASIANENE.NS","ASIANPAINT.NS","ASKAUTOLTD.NS","ASMS.NS","ASPINWALL.NS","ASTEC.NS","ASTERDM.NS","ASTRAL.NS","ASTRAMICRO.NS","ASTRAZEN.NS","ASTRON.NS","ATAM.NS","ATGL.NS","ATHERENERG.NS","ATL.NS","ATLANTAA.NS","ATUL.NS","ATULAUTO.NS","AUBANK.NS","AURIONPRO.NS","AUROPHARMA.NS","AURUM.NS","AUTOAXLES.NS","AUTOIND.NS","AVADHSUGAR.NS","AVALON.NS","AVANTEL.NS","AVANTIFEED.NS","AVG.NS","AVL.NS","AVONMORE.NS","AVROIND.NS","AVTNPL.NS","AWFIS.NS","AWHCL.NS","AWL.NS","AXISBANK.NS","AXITA.NS","AYMSYNTEX.NS","AZAD.NS","BAFNAPH.NS","BAGFILMS.NS","BAIDFIN.NS","BAJAJ-AUTO.NS","BAJAJCON.NS","BAJAJELEC.NS","BAJAJFINSV.NS","BAJAJHCARE.NS","BAJAJHFL.NS","BAJAJHIND.NS","BAJAJHLDNG.NS","BAJAJINDEF.NS","BAJFINANCE.NS","BALAJEE.NS","BALAMINES.NS","BALAXI.NS","BALKRISHNA.NS","BALKRISIND.NS","BALMLAWRIE.NS","BALPHARMA.NS","BALRAMCHIN.NS","BANARBEADS.NS","BANARISUG.NS","BANCOINDIA.NS","BANDHANBNK.NS","BANG.NS","BANKA.NS","BANKBARODA.NS","BANKINDIA.NS","BANSALWIRE.NS","BANSWRAS.NS","BARBEQUE.NS","BASF.NS","BASML.NS","BATAINDIA.NS","BAYERCROP.NS","BBL.NS","BBTC.NS","BBTCL.NS","BCLIND.NS","BCONCEPTS.NS","BDL.NS","BEARDSELL.NS","BECTORFOOD.NS","BEDMUTHA.NS","BEL.NS","BELLACASA.NS","BELRISE.NS","BEML.NS","BEPL.NS","BERGEPAINT.NS","BESTAGRO.NS","BFINVEST.NS","BFUTILITIE.NS","BHAGCHEM.NS","BHAGERIA.NS","BHAGYANGR.NS","BHANDARI.NS","BHARATFORG.NS","BHARATGEAR.NS","BHARATRAS.NS","BHARATWIRE.NS","BHARTIARTL.NS","BHARTIHEXA.NS","BHEL.NS","BIGBLOC.NS","BIKAJI.NS","BIL.NS","BIOCON.NS","BIRLACORPN.NS","BIRLAMONEY.NS","BIRLANU.NS","BLACKBUCK.NS","BLAL.NS","BLBLIMITED.NS","BLISSGVS.NS","BLKASHYAP.NS","BLS.NS","BLUEDART.NS","BLUEJET.NS","BLUESTARCO.NS","BLUSPRING.NS","BODALCHEM.NS","BOHRAIND.NS","BOMDYEING.NS","BORANA.NS","BOROLTD.NS","BORORENEW.NS","BOROSCI.NS","BOSCHLTD.NS","BPCL.NS","BPL.NS","BRIGADE.NS","BRITANNIA.NS","BSE.NS","BSHSL.NS","BSOFT.NS","BTML.NS","BUTTERFLY.NS","BVCL.NS","CAMPUS.NS","CAMS.NS","CANBK.NS","CANFINHOME.NS","CANTABIL.NS","CAPACITE.NS","CAPITALSFB.NS","CAPLIPOINT.NS","CARBORUNIV.NS","CARERATING.NS","CARRARO.NS","CARTRADE.NS","CARYSIL.NS","CASTROLIND.NS","CCCL.NS","CCHHL.NS","CCL.NS","CDSL.NS","CEATLTD.NS","CEIGALL.NS","CELEBRITY.NS","CELLO.NS","CENTENKA.NS","CENTEXT.NS","CENTRALBK.NS","CENTUM.NS","CENTURYPLY.NS","CERA.NS","CESC.NS","CEWATER.NS","CGCL.NS","CGPOWER.NS","CHALET.NS","CHAMBLFERT.NS","CHEMCON.NS","CHEMFAB.NS","CHEMPLASTS.NS","CHENNPETRO.NS","CHEVIOT.NS","CHOICEIN.NS","CHOLAFIN.NS","CHOLAHLDNG.NS","CIEINDIA.NS","CIFL.NS","CIGNITITEC.NS","CINELINE.NS","CIPLA.NS","CLEAN.NS","CLEDUCATE.NS","CLSEL.NS","CMSINFO.NS","COALINDIA.NS","COASTCORP.NS","COCHINSHIP.NS","COFFEEDAY.NS","COFORGE.NS","COHANCE.NS","COLPAL.NS","COMPUSOFT.NS","COMSYN.NS","CONCOR.NS","CONCORDBIO.NS","CONFIPET.NS","CONSOFINVT.NS","CONTROLPR.NS","CORALFINAC.NS","CORDSCABLE.NS","COROMANDEL.NS","COSMOFIRST.NS","CPCAP.NS","CRAFTSMAN.NS","CREATIVE.NS","CREDITACC.NS","CREST.NS","CRISIL.NS","CRIZAC.NS","CROMPTON.NS","CROWN.NS","CSBBANK.NS","CSLFINANCE.NS","CUB.NS","CUMMINSIND.NS","CUPID.NS","CYBERMEDIA.NS","CYIENT.NS","CYIENTDLM.NS","DABUR.NS","DALBHARAT.NS","DALMIASUG.NS","DAMCAPITAL.NS","DAMODARIND.NS","DATAMATICS.NS","DATAPATTNS.NS","DAVANGERE.NS","DBCORP.NS","DBEIL.NS","DBL.NS","DBOL.NS","DBSTOCKBRO.NS","DCBBANK.NS","DCI.NS","DCM.NS","DCMNVL.NS","DCMSHRIRAM.NS","DCMSRIND.NS","DCW.NS","DCXINDIA.NS","DDEVPLSTIK.NS","DECCANCE.NS","DEEDEV.NS","DEEPAKFERT.NS","DEEPAKNTR.NS","DEEPINDS.NS","DELHIVERY.NS","DELTACORP.NS","DEN.NS","DENORA.NS","DENTA.NS","DEVIT.NS","DEVYANI.NS","DHAMPURSUG.NS","DHANBANK.NS","DHANI.NS","DHANUKA.NS","DHUNINV.NS","DIACABS.NS","DIAMINESQ.NS","DIAMONDYD.NS","DICIND.NS","DIFFNKG.NS","DIGIDRIVE.NS","DIGISPICE.NS","DIGITIDE.NS","DIVGIITTS.NS","DIVISLAB.NS","DIXON.NS","DJML.NS","DLF.NS","DLINKINDIA.NS","DMART.NS","DMCC.NS","DNAMEDIA.NS","DODLA.NS","DOLATALGO.NS","DOLLAR.NS","DOLPHIN.NS","DOMS.NS","DONEAR.NS","DPABHUSHAN.NS","DPSCLTD.NS","DPWIRES.NS","DREDGECORP.NS","DRREDDY.NS","DSSL.NS","DTIL.NS","DUCON.NS","DVL.NS","DWARKESH.NS","DYCL.NS","DYNAMATECH.NS","DYNPRO.NS","E2E.NS","EASEMYTRIP.NS","ECLERX.NS","ECOSMOBLTY.NS","EDELWEISS.NS","EICHERMOT.NS","EIDPARRY.NS","EIEL.NS","EIHAHOTELS.NS","EIHOTEL.NS","EIMCOELECO.NS","EKC.NS","ELDEHSG.NS","ELECON.NS","ELECTCAST.NS","ELECTHERM.NS","ELGIEQUIP.NS","ELLEN.NS","EMAMILTD.NS","EMAMIPAP.NS","EMBDL.NS","EMCURE.NS","EMIL.NS","EMKAY.NS","EMMBI.NS","EMSLIMITED.NS","EMUDHRA.NS","ENDURANCE.NS","ENGINERSIN.NS","ENIL.NS","ENRIN.NS","ENTERO.NS","EPACK.NS","EPIGRAL.NS","EPL.NS","EQUITASBNK.NS","ERIS.NS","ESABINDIA.NS","ESAFSFB.NS","ESCORTS.NS","ESSENTIA.NS","ESTER.NS","ETERNAL.NS","ETHOSLTD.NS","EUREKAFORB.NS","EUROTEXIND.NS","EVEREADY.NS","EXCEL.NS","EXCELINDUS.NS","EXICOM.NS","EXIDEIND.NS","EXPLEOSOL.NS","FACT.NS","FAIRCHEMOR.NS","FAZE3Q.NS","FCL.NS","FCSSOFT.NS","FDC.NS","FEDERALBNK.NS","FEDFINA.NS","FIBERWEB.NS","FIEMIND.NS","FILATEX.NS","FILATFASH.NS","FINCABLES.NS","FINEORG.NS","FINOPB.NS","FINPIPE.NS","FIRSTCRY.NS","FISCHER.NS","FIVESTAR.NS","FLAIR.NS","FLUOROCHEM.NS","FMGOETZE.NS","FORCEMOT.NS","FORTIS.NS","FOSECOIND.NS","FSL.NS","FUSION.NS","GABRIEL.NS","GAEL.NS","GAIL.NS","GALAPREC.NS","GALAXYSURF.NS","GALLANTT.NS","GANDHAR.NS","GANDHITUBE.NS","GANECOS.NS","GANESHBE.NS","GANESHHOUC.NS","GANGAFORGE.NS","GANGESSECU.NS","GARFIBRES.NS","GARUDA.NS","GATEWAY.NS","GEECEE.NS","GEEKAYWIRE.NS","GENESYS.NS","GENUSPAPER.NS","GENUSPOWER.NS","GEOJITFSL.NS","GEPIL.NS","GESHIP.NS","GFLLIMITED.NS","GHCL.NS","GHCLTEXTIL.NS","GICHSGFIN.NS","GICRE.NS","GILLANDERS.NS","GILLETTE.NS","GIPCL.NS","GKWLIMITED.NS","GLAND.NS","GLAXO.NS","GLENMARK.NS","GLOBALVECT.NS","GLOBE.NS","GLOBECIVIL.NS","GLOBUSSPR.NS","GLOSTERLTD.NS","GMBREW.NS","GMDCLTD.NS","GMMPFAUDLR.NS","GMRAIRPORT.NS","GMRP&UI.NS","GNA.NS","GNFC.NS","GOACARBON.NS","GOCLCORP.NS","GOCOLORS.NS","GODFRYPHLP.NS","GODIGIT.NS","GODREJAGRO.NS","GODREJCP.NS","GODREJIND.NS","GODREJPROP.NS","GOKEX.NS","GOKUL.NS","GOKULAGRO.NS","GOLDIAM.NS","GOLDTECH.NS","GOODLUCK.NS","GOPAL.NS","GOYALALUM.NS","GPIL.NS","GPPL.NS","GPTHEALTH.NS","GPTINFRA.NS","GRANULES.NS","GRAPHITE.NS","GRASIM.NS","GRAVITA.NS","GREAVESCOT.NS","GREENLAM.NS","GREENPANEL.NS","GREENPLY.NS","GREENPOWER.NS","GRINDWELL.NS","GRINFRA.NS","GRMOVER.NS","GRPLTD.NS","GRSE.NS","GRWRHITECH.NS","GSFC.NS","GSLSU.NS","GSPL.NS","GSS.NS","GTL.NS","GTLINFRA.NS","GTPL.NS","GUFICBIO.NS","GUJALKALI.NS","GUJAPOLLO.NS","GUJGASLTD.NS","GUJRAFFIA.NS","GUJTHEM.NS","GULFOILLUB.NS","GULFPETRO.NS","GULPOLY.NS","GVPTECH.NS","GVT&D.NS","HAL.NS","HAPPSTMNDS.NS","HAPPYFORGE.NS","HARIOMPIPE.NS","HARRMALAYA.NS","HARSHA.NS","HATHWAY.NS","HATSUN.NS","HAVELLS.NS","HBLENGINE.NS","HCG.NS","HCLTECH.NS","HDBFS.NS","HDFCAMC.NS","HDFCBANK.NS","HDFCLIFE.NS","HEADSUP.NS","HEG.NS","HEIDELBERG.NS","HEMIPROP.NS","HERANBA.NS","HERITGFOOD.NS","HEROMOTOCO.NS","HESTERBIO.NS","HEUBACHIND.NS","HEXATRADEX.NS","HEXT.NS","HFCL.NS","HGINFRA.NS","HGS.NS","HIKAL.NS","HIMATSEIDE.NS","HINDALCO.NS","HINDCOMPOS.NS","HINDCON.NS","HINDCOPPER.NS","HINDOILEXP.NS","HINDPETRO.NS","HINDUNILVR.NS","HINDWAREAP.NS","HINDZINC.NS","HIRECT.NS","HISARMETAL.NS","HITECH.NS","HITECHCORP.NS","HLEGLAS.NS","HLVLTD.NS","HMAAGRO.NS","HMVL.NS","HNDFDS.NS","HOMEFIRST.NS","HONASA.NS","HONAUT.NS","HONDAPOWER.NS","HPAL.NS","HPIL.NS","HPL.NS","HSCL.NS","HUBTOWN.NS","HUDCO.NS","HUHTAMAKI.NS","HYUNDAI.NS","ICEMAKE.NS","ICICIBANK.NS","ICICIGI.NS","ICICIPRULI.NS","ICIL.NS","ICRA.NS","IDBI.NS","IDEA.NS","IDEAFORGE.NS","IDFCFIRSTB.NS","IEX.NS","IFBIND.NS","IFCI.NS","IFGLEXPOR.NS","IGARASHI.NS","IGCL.NS","IGIL.NS","IGL.NS","IGPL.NS","IIFL.NS","IIFLCAPS.NS","IKIO.NS","IKS.NS","IMAGICAA.NS","IMFA.NS","IMPAL.NS","INDBANK.NS","INDGN.NS","INDHOTEL.NS","INDIACEM.NS","INDIAGLYCO.NS","INDIAMART.NS","INDIANB.NS","INDIANCARD.NS","INDIANHUME.NS","INDIASHLTR.NS","INDIGO.NS","INDIGOPNTS.NS","INDNIPPON.NS","INDOAMIN.NS","INDOBORAX.NS","INDOCO.NS","INDOSTAR.NS","INDOTECH.NS","INDOUS.NS","INDOWIND.NS","INDRAMEDCO.NS","INDSWFTLTD.NS","INDTERRAIN.NS","INDUSINDBK.NS","INDUSTOWER.NS","INFIBEAM.NS","INFOBEAN.NS","INFY.NS","INGERRAND.NS","INNOVACAP.NS","INNOVANA.NS","INOXINDIA.NS","INOXWIND.NS","INSECTICID.NS","INTELLECT.NS","INTENTECH.NS","INTLCONV.NS","INVENTURE.NS","IOB.NS","IOC.NS","IOLCP.NS","IONEXCHANG.NS","IPCALAB.NS","IPL.NS","IRB.NS","IRCON.NS","IRCTC.NS","IREDA.NS","IRFC.NS","IRMENERGY.NS","ISFT.NS","ISGEC.NS","ITC.NS","ITCHOTELS.NS","ITDC.NS","ITDCEM.NS","ITI.NS","IVC.NS","IVP.NS","IXIGO.NS","IZMO.NS","J&KBANK.NS","JAGRAN.NS","JAGSNPHARM.NS","JAIBALAJI.NS","JAICORPLTD.NS","JAIPURKURT.NS","JAMNAAUTO.NS","JASH.NS","JAYAGROGN.NS","JAYBARMARU.NS","JAYNECOIND.NS","JAYSREETEA.NS","JBCHEPHARM.NS","JBMA.NS","JCHAC.NS","JETFREIGHT.NS","JGCHEM.NS","JHS.NS","JINDALPOLY.NS","JINDALSAW.NS","JINDALSTEL.NS","JINDRILL.NS","JINDWORLD.NS","JIOFIN.NS","JISLDVREQS.NS","JISLJALEQS.NS","JITFINFRA.NS","JKCEMENT.NS","JKIL.NS","JKLAKSHMI.NS","JKPAPER.NS","JKTYRE.NS","JLHL.NS","JMA.NS","JMFINANCIL.NS","JNKINDIA.NS","JOCIL.NS","JPOLYINVST.NS","JPPOWER.NS","JSFB.NS","JSL.NS","JSWENERGY.NS","JSWINFRA.NS","JSWSTEEL.NS","JTEKTINDIA.NS","JTLIND.NS","JUBLCPL.NS","JUBLFOOD.NS","JUBLINGREA.NS","JUBLPHARMA.NS","JUNIPER.NS","JUSTDIAL.NS","JWL.NS","JYOTHYLAB.NS","JYOTICNC.NS","JYOTISTRUC.NS","KABRAEXTRU.NS","KAJARIACER.NS","KAKATCEM.NS","KALAMANDIR.NS","KALPATARU.NS","KALYANIFRG.NS","KALYANKJIL.NS","KAMATHOTEL.NS","KAMDHENU.NS","KANANIIND.NS","KANORICHEM.NS","KANSAINER.NS","KAPSTON.NS","KARURVYSYA.NS","KAUSHALYA.NS","KAYNES.NS","KCP.NS","KCPSUGIND.NS","KDDL.NS","KEC.NS","KECL.NS","KEI.NS","KELLTONTEC.NS","KFINTECH.NS","KHADIM.NS","KHANDSE.NS","KICL.NS","KIMS.NS","KINGFA.NS","KIOCL.NS","KIRIINDUS.NS","KIRLOSBROS.NS","KIRLOSENG.NS","KIRLOSIND.NS","KIRLPNU.NS","KKCL.NS","KMEW.NS","KMSUGAR.NS","KNRCON.NS","KOHINOOR.NS","KOKUYOCMLN.NS","KOLTEPATIL.NS","KOPRAN.NS","KOTAKBANK.NS","KOTARISUG.NS","KOTHARIPET.NS","KOTHARIPRO.NS","KPEL.NS","KPIGREEN.NS","KPIL.NS","KPITTECH.NS","KPRMILL.NS","KRBL.NS","KRISHANA.NS","KRITIKA.NS","KRITINUT.NS","KRN.NS","KRONOX.NS","KROSS.NS","KRSNAA.NS","KSB.NS","KSCL.NS","KSHITIJPOL.NS","KSL.NS","KSOLVES.NS","KTKBANK.NS","KUANTUM.NS","LAGNAM.NS","LALPATHLAB.NS","LAMBODHARA.NS","LANCORHOL.NS","LANDMARK.NS","LAOPALA.NS","LATENTVIEW.NS","LATTEYS.NS","LAURUSLABS.NS","LAXMICOT.NS","LAXMIDENTL.NS","LEMONTREE.NS","LEXUS.NS","LFIC.NS","LGBBROSLTD.NS","LGHL.NS","LIBAS.NS","LICHSGFIN.NS","LICI.NS","LIKHITHA.NS","LINCOLN.NS","LINDEINDIA.NS","LLOYDSENGG.NS","LLOYDSENT.NS","LLOYDSME.NS","LMW.NS","LODHA.NS","LOKESHMACH.NS","LORDSCHLO.NS","LOTUSEYE.NS","LOVABLE.NS","LPDC.NS","LT.NS","LTF.NS","LTFOODS.NS","LTIM.NS","LTTS.NS","LUMAXIND.NS","LUMAXTECH.NS","LUPIN.NS","LUXIND.NS","LXCHEM.NS","LYKALABS.NS","M&M.NS","M&MFIN.NS","MADHAV.NS","MADRASFERT.NS","MAGADSUGAR.NS","MAGNUM.NS","MAHABANK.NS","MAHAPEXLTD.NS","MAHEPC.NS","MAHESHWARI.NS","MAHLIFE.NS","MAHLOG.NS","MAHSCOOTER.NS","MAHSEAMLES.NS","MAITHANALL.NS","MALLCOM.NS","MALUPAPER.NS","MAMATA.NS","MANAKALUCO.NS","MANAKCOAT.NS","MANAKSIA.NS","MANALIPETC.NS","MANAPPURAM.NS","MANBA.NS","MANCREDIT.NS","MANGALAM.NS","MANGCHEFER.NS","MANGLMCEM.NS","MANINDS.NS","MANINFRA.NS","MANKIND.NS","MANOMAY.NS","MANORAMA.NS","MANYAVAR.NS","MAPMYINDIA.NS","MARALOVER.NS","MARATHON.NS","MARICO.NS","MARKSANS.NS","MARUTI.NS","MASFIN.NS","MASTEK.NS","MASTERTR.NS","MATRIMONY.NS","MAWANASUG.NS","MAXESTATES.NS","MAXHEALTH.NS","MAXIND.NS","MAYURUNIQ.NS","MAZDA.NS","MAZDOCK.NS","MBAPL.NS","MBLINFRA.NS","MCL.NS","MCLEODRUSS.NS","MCLOUD.NS","MCX.NS","MEDANTA.NS","MEDIASSIST.NS","MEDICAMEQ.NS","MEDICO.NS","MEDPLUS.NS","MEGASTAR.NS","MENONBE.NS","METROBRAND.NS","METROPOLIS.NS","MFSL.NS","MGEL.NS","MGL.NS","MHLXMIRU.NS","MHRIL.NS","MICEL.NS","MIDHANI.NS","MINDACORP.NS","MIRCELECTR.NS","MIRZAINT.NS","MITCON.NS","MITTAL.NS","MMFL.NS","MMP.NS","MMTC.NS","MOBIKWIK.NS","MODISONLTD.NS","MODTHREAD.NS","MOHITIND.NS","MOIL.NS","MOKSH.NS","MOL.NS","MOLDTECH.NS","MOLDTKPAC.NS","MONARCH.NS","MONTECARLO.NS","MOREPENLAB.NS","MOSCHIP.NS","MOTHERSON.NS","MOTILALOFS.NS","MOTISONS.NS","MOTOGENFIN.NS","MPHASIS.NS","MPSLTD.NS","MRF.NS","MRPL.NS","MSPL.NS","MSTCLTD.NS","MSUMI.NS","MTARTECH.NS","MTNL.NS","MUFIN.NS","MUFTI.NS","MUKANDLTD.NS","MUKKA.NS","MUKTAARTS.NS","MUNJALAU.NS","MUNJALSHOW.NS","MURUDCERA.NS","MUTHOOTCAP.NS","MUTHOOTFIN.NS","MUTHOOTMF.NS","MVGJL.NS","NAGREEKCAP.NS","NAGREEKEXP.NS","NAHARSPING.NS","NAM-INDIA.NS","NARMADA.NS","NATCAPSUQ.NS","NATCOPHARM.NS","NATIONALUM.NS","NAUKRI.NS","NAVA.NS","NAVINFLUOR.NS","NAVKARCORP.NS","NAVNETEDUL.NS","NAZARA.NS","NBCC.NS","NBIFIN.NS","NCC.NS","NCLIND.NS","NDGL.NS","NDL.NS","NDLVENTURE.NS","NDRAUTO.NS","NECCLTD.NS","NELCAST.NS","NELCO.NS","NEOGEN.NS","NESCO.NS","NESTLEIND.NS","NETWEB.NS","NETWORK18.NS","NEULANDLAB.NS","NEWGEN.NS","NEXTMEDIA.NS","NFL.NS","NGIL.NS","NGLFINE.NS","NH.NS","NHPC.NS","NIACL.NS","NIBE.NS","NIITLTD.NS","NIITMTS.NS","NILAINFRA.NS","NILASPACES.NS","NILKAMAL.NS","NINSYS.NS","NIPPOBATRY.NS","NIRAJ.NS","NITCO.NS","NITINSPIN.NS","NITIRAJ.NS","NIVABUPA.NS","NKIND.NS","NLCINDIA.NS","NMDC.NS","NOCIL.NS","NORTHARC.NS","NOVAAGRI.NS","NPST.NS","NRBBEARING.NS","NSIL.NS","NSLNISP.NS","NTPC.NS","NTPCGREEN.NS","NUCLEUS.NS","NURECA.NS","NUVAMA.NS","NUVOCO.NS","NYKAA.NS","OAL.NS","OBCL.NS","OBEROIRLTY.NS","OFSS.NS","OIL.NS","OILCOUNTUB.NS","OLAELEC.NS","OLECTRA.NS","OMAXAUTO.NS","OMAXE.NS","OMINFRAL.NS","ONESOURCE.NS","ONGC.NS","ONMOBILE.NS","OPTIEMUS.NS","ORCHPHARMA.NS","ORICONENT.NS","ORIENTBELL.NS","ORIENTCEM.NS","ORIENTCER.NS","ORIENTELEC.NS","ORIENTHOT.NS","ORIENTLTD.NS","ORIENTPPR.NS","ORIENTTECH.NS","ORISSAMINE.NS","ORTINGLOBE.NS","OSWALAGRO.NS","OSWALGREEN.NS","OSWALPUMPS.NS","OSWALSEEDS.NS","PAGEIND.NS","PAISALO.NS","PAKKA.NS","PALASHSECU.NS","PANACEABIO.NS","PANAMAPET.NS","PARACABLES.NS","PARADEEP.NS","PARAGMILK.NS","PARAS.NS","PARASPETRO.NS","PARKHOTELS.NS","PASHUPATI.NS","PASUPTAC.NS","PATANJALI.NS","PATELENG.NS","PATINTLOG.NS","PAVNAIND.NS","PAYTM.NS","PCBL.NS","PCJEWELLER.NS","PDMJEPAPER.NS","PDSL.NS","PEARLPOLY.NS","PEL.NS","PENIND.NS","PENINLAND.NS","PERSISTENT.NS","PETRONET.NS","PFC.NS","PFIZER.NS","PFOCUS.NS","PFS.NS","PGEL.NS","PGHH.NS","PGHL.NS","PGIL.NS","PHOENIXLTD.NS","PICCADIL.NS","PIDILITIND.NS","PIIND.NS","PILANIINVS.NS","PIONEEREMB.NS","PITTIENG.NS","PIXTRANS.NS","PLASTIBLEN.NS","PLATIND.NS","PLAZACABLE.NS","PNB.NS","PNBGILTS.NS","PNBHOUSING.NS","PNCINFRA.NS","PNGJL.NS","POCL.NS","PODDARMENT.NS","POKARNA.NS","POLICYBZR.NS","POLYCAB.NS","POLYMED.NS","POLYPLEX.NS","PONNIERODE.NS","POONAWALLA.NS","POWERGRID.NS","POWERINDIA.NS","POWERMECH.NS","PPL.NS","PPLPHARMA.NS","PRABHA.NS","PRAENG.NS","PRAJIND.NS","PRAKASH.NS","PRAKASHSTL.NS","PRECAM.NS","PRECWIRE.NS","PREMEXPLN.NS","PREMIERENE.NS","PREMIERPOL.NS","PRESTIGE.NS","PRICOLLTD.NS","PRIMESECU.NS","PRIMO.NS","PRINCEPIPE.NS","PRITI.NS","PRITIKAUTO.NS","PRIVISCL.NS","PROSTARM.NS","PROTEAN.NS","PROZONER.NS","PRSMJOHNSN.NS","PRUDENT.NS","PRUDMOULI.NS","PSB.NS","PSPPROJECT.NS","PTC.NS","PTCIL.NS","PTL.NS","PUNJABCHEM.NS","PURVA.NS","PVP.NS","PVRINOX.NS","PVSL.NS","PYRAMID.NS","QPOWER.NS","QUADFUTURE.NS","QUESS.NS","QUICKHEAL.NS","RACE.NS","RACLGEAR.NS","RADAAN.NS","RADHIKAJWE.NS","RADIANTCMS.NS","RADICO.NS","RADIOCITY.NS","RAILTEL.NS","RAIN.NS","RAINBOW.NS","RAJESHEXPO.NS","RAJOOENG.NS","RAJRATAN.NS","RAJSREESUG.NS","RALLIS.NS","RAMASTEEL.NS","RAMCOCEM.NS","RAMCOIND.NS","RAMKY.NS","RAMRAT.NS","RANASUG.NS","RANEHOLDIN.NS","RATEGAIN.NS","RATNAMANI.NS","RATNAVEER.NS","RAYMOND.NS","RAYMONDLSL.NS","RAYMONDREL.NS","RBA.NS","RBLBANK.NS","RBZJEWEL.NS","RCF.NS","RECLTD.NS","REDINGTON.NS","REDTAPE.NS","REFEX.NS","REGENCERAM.NS","RELAXO.NS","RELCHEMQ.NS","RELIABLE.NS","RELIANCE.NS","RELIGARE.NS","REMSONSIND.NS","RENUKA.NS","REPCOHOME.NS","REPL.NS","REPRO.NS","RESPONIND.NS","RETAIL.NS","RGL.NS","RHIM.NS","RHL.NS","RICOAUTO.NS","RIIL.NS","RISHABH.NS","RITCO.NS","RITES.NS","RKDL.NS","RKEC.NS","RKFORGE.NS","RKSWAMY.NS","RML.NS","ROHLTD.NS","ROLEXRINGS.NS","ROSSARI.NS","ROSSELLIND.NS","ROSSTECH.NS","ROTO.NS","ROUTE.NS","RPEL.NS","RPGLIFE.NS","RPPINFRA.NS","RPPL.NS","RPSGVENT.NS","RPTECH.NS","RRKABEL.NS","RSWM.NS","RSYSTEMS.NS","RTNINDIA.NS","RTNPOWER.NS","RUBFILA.NS","RUBYMILLS.NS","RUCHIRA.NS","RUPA.NS","RUSHIL.NS","RUSTOMJEE.NS","RVHL.NS","RVNL.NS","SADBHAV.NS","SADBHIN.NS","SAFARI.NS","SAGARDEEP.NS","SAGCEM.NS","SAGILITY.NS","SAHYADRI.NS","SAIL.NS","SAILIFE.NS","SAKHTISUG.NS","SAKSOFT.NS","SALASAR.NS","SALONA.NS","SALSTEEL.NS","SALZERELEC.NS","SAMBHAAV.NS","SAMBHV.NS","SAMHI.NS","SAMMAANCAP.NS","SAMPANN.NS","SANATHAN.NS","SANDESH.NS","SANDHAR.NS","SANDUMA.NS","SANGAMIND.NS","SANGHIIND.NS","SANGHVIMOV.NS","SANGINITA.NS","SANOFI.NS","SANOFICONR.NS","SANSERA.NS","SANSTAR.NS","SAPPHIRE.NS","SARDAEN.NS","SAREGAMA.NS","SARVESHWAR.NS","SASKEN.NS","SASTASUNDR.NS","SATIA.NS","SATIN.NS","SAURASHCEM.NS","SBC.NS","SBCL.NS","SBFC.NS","SBICARD.NS","SBILIFE.NS","SBIN.NS","SCHAEFFLER.NS","SCHAND.NS","SCI.NS","SCILAL.NS","SCODATUBES.NS","SCPL.NS","SDBL.NS","SEAMECLTD.NS","SECURKLOUD.NS","SELAN.NS","SENCO.NS","SENORES.NS","SEPC.NS","SEQUENT.NS","SERVOTECH.NS","SESHAPAPER.NS","SFL.NS","SGIL.NS","SHAHALLOYS.NS","SHAILY.NS","SHAKTIPUMP.NS","SHALBY.NS","SHALPAINTS.NS","SHANKARA.NS","SHANTIGEAR.NS","SHARDACROP.NS","SHARDAMOTR.NS","SHAREINDIA.NS","SHIVALIK.NS","SHIVAMAUTO.NS","SHIVAMILLS.NS","SHIVATEX.NS","SHK.NS","SHOPERSTOP.NS","SHRADHA.NS","SHREDIGCEM.NS","SHREECEM.NS","SHREEPUSHK.NS","SHREERAMA.NS","SHRENIK.NS","SHRIPISTON.NS","SHRIRAMFIN.NS","SHRIRAMPPS.NS","SHYAMMETL.NS","SIEMENS.NS","SIGACHI.NS","SIGNATURE.NS","SIGNPOST.NS","SIKKO.NS","SIL.NS","SILINV.NS","SILLYMONKS.NS","SILVERTUC.NS","SIMPLEXINF.NS","SINCLAIR.NS","SINDHUTRAD.NS","SINTERCOM.NS","SIRCA.NS","SIS.NS","SIYSIL.NS","SJS.NS","SJVN.NS","SKFINDIA.NS","SKIPPER.NS","SKYGOLD.NS","SMARTLINK.NS","SMARTWORKS.NS","SMCGLOBAL.NS","SMLISUZU.NS","SMLT.NS","SMSLIFE.NS","SMSPHARMA.NS","SNOWMAN.NS","SOBHA.NS","SOFTTECH.NS","SOLARA.NS","SOLARINDS.NS","SOMANYCERA.NS","SOMICONVEY.NS","SONACOMS.NS","SONAMLTD.NS","SONATSOFTW.NS","SOTL.NS","SOUTHBANK.NS","SPAL.NS","SPANDANA.NS","SPARC.NS","SPECIALITY.NS","SPECTRUM.NS","SPENCERS.NS","SPIC.NS","SPLPETRO.NS","SPMLINFRA.NS","SPORTKING.NS","SRD.NS","SREEL.NS","SRF.NS","SRGHFL.NS","SRHHYPOLTD.NS","SRM.NS","SSDL.NS","SSWL.NS","STANLEY.NS","STAR.NS","STARCEMENT.NS","STARHEALTH.NS","STARPAPER.NS","STARTECK.NS","STEELCAS.NS","STEELCITY.NS","STEELXIND.NS","STEL.NS","STERTOOLS.NS","STLTECH.NS","STOVEKRAFT.NS","STYLAMIND.NS","STYLEBAAZA.NS","STYRENIX.NS","SUBROS.NS","SUDARSCHEM.NS","SUKHJITS.NS","SULA.NS","SUMICHEM.NS","SUMIT.NS","SUMMITSEC.NS","SUNCLAY.NS","SUNDARAM.NS","SUNDARMFIN.NS","SUNDARMHLD.NS","SUNDRMBRAK.NS","SUNDRMFAST.NS","SUNDROP.NS","SUNFLAG.NS","SUNPHARMA.NS","SUNTECK.NS","SUNTV.NS","SUPERHOUSE.NS","SUPERSPIN.NS","SUPRAJIT.NS","SUPREME.NS","SUPREMEIND.NS","SUPRIYA.NS","SURAJEST.NS","SURAJLTD.NS","SURAKSHA.NS","SURANASOL.NS","SURANAT&P.NS","SURYALAXMI.NS","SURYAROSNI.NS","SURYODAY.NS","SUTLEJTEX.NS","SUVIDHAA.NS","SUZLON.NS","SVPGLOB.NS","SWANENERGY.NS","SWARAJENG.NS","SWELECTES.NS","SWIGGY.NS","SWSOLAR.NS","SYMPHONY.NS","SYNGENE.NS","SYRMA.NS","TAINWALCHM.NS","TAJGVK.NS","TALBROAUTO.NS","TANLA.NS","TARACHAND.NS","TARC.NS","TARIL.NS","TARMAT.NS","TARSONS.NS","TASTYBITE.NS","TATACHEM.NS","TATACOMM.NS","TATACONSUM.NS","TATAELXSI.NS","TATAINVEST.NS","TATAMOTORS.NS","TATAPOWER.NS","TATASTEEL.NS","TATATECH.NS","TATVA.NS","TBOTEK.NS","TBZ.NS","TCI.NS","TCIEXP.NS","TCPLPACK.NS","TCS.NS","TDPOWERSYS.NS","TEAMLEASE.NS","TECHM.NS","TECHNOE.NS","TEGA.NS","TEJASNET.NS","TEXINFRA.NS","TEXMOPIPES.NS","TEXRAIL.NS","TFCILTD.NS","TGBHOTELS.NS","THANGAMAYL.NS","THEINVEST.NS","THEJO.NS","THELEELA.NS","THEMISMED.NS","THERMAX.NS","THOMASCOOK.NS","THYROCARE.NS","TI.NS","TIIL.NS","TIINDIA.NS","TIMESGTY.NS","TIMETECHNO.NS","TIMKEN.NS","TINNARUBR.NS","TIPSFILMS.NS","TIPSMUSIC.NS","TIRUMALCHM.NS","TITAGARH.NS","TITAN.NS","TMB.NS","TNPETRO.NS","TNPL.NS","TOKYOPLAST.NS","TOLINS.NS","TORNTPHARM.NS","TORNTPOWER.NS","TOTAL.NS","TOUCHWOOD.NS","TPLPLASTEH.NS","TRACXN.NS","TRANSRAILL.NS","TRANSWORLD.NS","TRAVELFOOD.NS","TREJHARA.NS","TREL.NS","TRENT.NS","TRF.NS","TRIDENT.NS","TRIGYN.NS","TRITURBINE.NS","TRIVENI.NS","TTKHLTCARE.NS","TTKPRESTIG.NS","TVSHLTD.NS","TVSMOTOR.NS","TVSSCS.NS","TVSSRICHAK.NS","TVTODAY.NS","UBL.NS","UCAL.NS","UCOBANK.NS","UDAICEMENT.NS","UDS.NS","UFLEX.NS","UFO.NS","UGARSUGAR.NS","UGROCAP.NS","UJJIVANSFB.NS","ULTRACEMCO.NS","UMESLTD.NS","UMIYA-MRO.NS","UNICHEMLAB.NS","UNIDT.NS","UNIECOM.NS","UNIENTER.NS","UNIONBANK.NS","UNIPARTS.NS","UNITDSPR.NS","UNITEDPOLY.NS","UNITEDTEA.NS","UNIVASTU.NS","UNIVCABLES.NS","UNOMINDA.NS","UPL.NS","URJA.NS","USHAMART.NS","USK.NS","UTIAMC.NS","UTKARSHBNK.NS","UTTAMSUGAR.NS","UYFINCORP.NS","V2RETAIL.NS","VADILALIND.NS","VAIBHAVGBL.NS","VAISHALI.NS","VALIANTLAB.NS","VARDHACRLC.NS","VARDMNPOLY.NS","VARROC.NS","VASCONEQ.NS","VBL.NS","VEDL.NS","VEEDOL.NS","VENKEYS.NS","VENTIVE.NS","VENUSPIPES.NS","VERANDA.NS","VERTOZ.NS","VESUVIUS.NS","VETO.NS","VGUARD.NS","VHL.NS","VIDHIING.NS","VIJAYA.NS","VIJIFIN.NS","VIKASECO.NS","VIKASLIFE.NS","VIMTALABS.NS","VINATIORGA.NS","VINCOFE.NS","VINDHYATEL.NS","VIPCLOTHNG.NS","VIPIND.NS","VIRINCHI.NS","VISHNU.NS","VISHWARAJ.NS","VIVIDHA.NS","VLSFINANCE.NS","VMART.NS","VMM.NS","VOLTAMP.NS","VOLTAS.NS","VPRPL.NS","VRAJ.NS","VRLLOG.NS","VSSL.NS","VSTIND.NS","VSTL.NS","VSTTILLERS.NS","VTL.NS","WAAREEENER.NS","WAAREERTL.NS","WABAG.NS","WCIL.NS","WEALTH.NS","WEBELSOLAR.NS","WEIZMANIND.NS","WEL.NS","WELCORP.NS","WELENT.NS","WELSPUNLIV.NS","WENDT.NS","WESTLIFE.NS","WEWIN.NS","WHEELS.NS","WHIRLPOOL.NS","WILLAMAGOR.NS","WINDLAS.NS","WINDMACHIN.NS","WIPL.NS","WIPRO.NS","WOCKPHARMA.NS","WONDERLA.NS","WORTH.NS","WSTCSTPAPR.NS","XCHANGING.NS","XELPMOC.NS","XPROINDIA.NS","XTGLOBAL.NS","YASHO.NS","YATHARTH.NS","YATRA.NS","YESBANK.NS","YUKEN.NS","ZAGGLE.NS","ZEEL.NS","ZEEMEDIA.NS","ZENITHEXPO.NS","ZENSARTECH.NS","ZENTEC.NS","ZFCVINDIA.NS","ZIMLAB.NS","ZODIACLOTH.NS","ZOTA.NS","ZUARI.NS","ZUARIIND.NS","ZYDUSLIFE.NS","ZYDUSWELL.NS" 
]

    except Exception as e:
        print(f"â ï¸ Could not fetch NIFTY 100: {e}")
        return ["RELIANCE.NS", "TCS.NS"]

# ------------------------------------------------------------------
# Analyze a single stock
# ------------------------------------------------------------------
def analyze_stock(ticker):
    print(f"\nð Analyzing: {ticker}")
    try:
        df = yf.download(ticker, period="3mo", interval="1d", progress=False)

        if isinstance(df.columns, pd.MultiIndex):
            df.columns = df.columns.get_level_values(0)
        df.columns.name = None

        df = df[['Open', 'High', 'Low', 'Close', 'Volume']].dropna()
        df = df.astype(float)

        if df.empty or len(df) < 50:
            print("â ï¸ Not enough data.")
            return None

        df = calculate_additional_indicators(df)
        df.dropna(inplace=True)

        # Attach candle pattern
        df['Candle'] = "None"
        df.at[df.index[-1], 'Candle'] = detect_candle_pattern(df)

        latest = df.iloc[-1]
        previous = df.iloc[-2]

        score, matched_indicators = advanced_strategy_score(latest, previous)
        print(f"ð§  {ticker} Strategy Score: {score:.2f}")

        if score < SCORE_THRESHOLD:
            return None

        print(f"\nð Matched : {ticker}")

        history = df.tail(30).copy()
        history_json = [
            {
                "date": str(idx.date()),
                "close": round(row.Close, 2),
                "ema": round(row.EMA_50, 2),
                "rsi": round(row.RSI, 2),
                "macd": round(row.MACD, 2),
                "signal": round(row.Signal, 2),
                "hist": round(row.MACD_Hist, 2),
                "volume": int(row.Volume),
                "volumeAvg": int(row.Volume_avg),
                "willr": round(row.WilliamsR, 2),
                "atr": round(row.ATR, 2),
                "bb_pos": round(row.BB_Position, 2),
                "priceChange1D": round(row.Price_Change_1D, 2),
                "priceChange3D": round(row.Price_Change_3D, 2),
                "priceChange5D": round(row.Price_Change_5D, 2),
                "stochK": round(row.Stoch_K, 2),
                "stochD": round(row.Stoch_D, 2),
                "signal_trigger": bool(row.get("Signal_Trigger", False)),
                "sell_trigger": bool(row.get("Sell_Trigger", False)),
            }
            for idx, row in history.iterrows()
        ]

        return {
            "ticker": ticker,
            "close": round(latest['Close'], 2),
            "ema": round(latest['EMA_50'], 2),
            "rsi": round(latest['RSI'], 2),
            "macd": round(latest['MACD'], 2),
            "signal": round(latest['Signal'], 2),
            "hist": round(latest['MACD_Hist'], 2),
            "volume": int(latest['Volume']),
            "volumeAvg": int(latest['Volume_avg']),
            "willr": round(latest['WilliamsR'], 2),
            "atr": round(latest['ATR'], 2),
            "bb_pos": round(latest['BB_Position'], 2),
            "priceChange1D": round(latest['Price_Change_1D'], 2),
            "priceChange3D": round(latest['Price_Change_3D'], 2),
            "priceChange5D": round(latest['Price_Change_5D'], 2),
            "stochK": round(latest['Stoch_K'], 2),
            "stochD": round(latest['Stoch_D'], 2),
            "pattern": latest['Candle'],
            "score": round(score, 2),
            "matched_indicators": matched_indicators,
            "history": history_json
        }

    except Exception as e:
        print(f"â Error analyzing {ticker}: {e}")
        return None

# ------------------------------------------------------------------
# Run Screener
# ------------------------------------------------------------------
def run_screener():
    matches = []
    tickers = fetch_nifty_100()

    for ticker in tickers:
        stock = analyze_stock(ticker)
        if stock:
            matches.append(stock)
        time.sleep(0.2)

    if matches:
        for stock in matches:
            msg = (
                f"ð¯ *{stock['ticker']}*\n"
                f"Price: â¹{stock['close']} | EMA50: {stock['ema']}\n"
                f"RSI: {stock['rsi']} | Williams %R: {stock['willr']}\n"
                f"MACD: {stock['macd']} | Signal: {stock['signal']} | Hist: {stock['hist']}\n"
                f"Volume: {stock['volume']} | Avg: {stock['volumeAvg']}\n"
                f"BB Pos: {stock['bb_pos']} | ATR: {stock['atr']}\n"
                f"% Change: 1D {stock['priceChange1D']}%, 3D {stock['priceChange3D']}%, 5D {stock['priceChange5D']}%\n"
                f"Stoch %K: {stock['stochK']} | %D: {stock['stochD']}\n"
                f"Candle: {stock['pattern']} | Score: {stock['score']}\n"
            )
            send_telegram(msg)
    else:
        send_telegram("ð« *No stocks matched advanced criteria today.*")

if __name__ == "__main__":
    run_screener()
